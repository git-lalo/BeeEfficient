<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bee Efficient ‚Äî Smart Energistyring</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffc300">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #06080c;
            --card: rgba(18, 24, 33, 0.88);
            --card-solid: #121821;
            --honey: #ffc300;
            --honey-dark: #e6af00;
            --honey-glow: rgba(255, 195, 0, 0.22);
            --honey-glow-strong: rgba(255, 195, 0, 0.45);
            --success: #00d166;
            --success-dim: rgba(0, 209, 102, 0.12);
            --danger: #ff4d4d;
            --danger-dim: rgba(255, 77, 77, 0.10);
            --warning: #f59e0b;
            --warning-dim: rgba(245, 158, 11, 0.12);
            --text: #f1f5f9;
            --text-dim: #6b7a90;
            --accent: #3b82f6;
            --accent-dim: rgba(59, 130, 246, 0.12);
            --glass-border: rgba(255,255,255,0.06);
            --purple: #a78bfa;
            --purple-dim: rgba(167,139,250,0.12);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        *:not(.no-transition) { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; overflow-x: hidden; position: relative;
        }

        /* === Ambient Background === */
        .bg-pattern {
            position: fixed; inset: 0; z-index: 0; pointer-events: none; opacity: 0.025;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='56' height='100'%3E%3Cpath d='M28 66L0 50 0 16 28 0 56 16 56 50z' fill='none' stroke='%23ffc300' stroke-width='1'/%3E%3Cpath d='M28 100L0 84 0 50 28 34 56 50 56 84z' fill='none' stroke='%23ffc300' stroke-width='1'/%3E%3C/svg%3E");
            background-size: 56px 100px;
        }
        .bg-glow {
            position: fixed; top: -250px; left: 50%; transform: translateX(-50%);
            width: 900px; height: 700px; z-index: 0; pointer-events: none;
            background: radial-gradient(ellipse, rgba(255,195,0,0.05) 0%, transparent 65%);
        }
        .bg-glow-2 {
            position: fixed; bottom: -300px; right: -200px;
            width: 600px; height: 600px; z-index: 0; pointer-events: none;
            background: radial-gradient(ellipse, rgba(59,130,246,0.04) 0%, transparent 70%);
        }

        /* === Header === */
        header {
            width: 100%; max-width: 1100px; padding: 18px 30px;
            display: flex; justify-content: space-between; align-items: center;
            position: relative; z-index: 2;
        }
        .logo-group { display: flex; align-items: center; gap: 12px; }
        .logo-hex {
            width: 40px; height: 40px; position: relative;
            background: linear-gradient(135deg, var(--honey), #f59e0b);
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            display: flex; align-items: center; justify-content: center;
        }
        .logo-hex::after { content: "üêù"; position: absolute; font-size: 1rem; }
        .logo-text { font-size: 1.4rem; font-weight: 900; letter-spacing: -0.5px; }
        .logo-text span { color: var(--honey); }

        .header-right { display: flex; align-items: center; gap: 12px; }
        .live-badge {
            display: flex; align-items: center; gap: 6px;
            font-size: 0.65rem; font-weight: 700; color: var(--success);
            text-transform: uppercase; letter-spacing: 1.2px;
        }
        .live-dot {
            width: 6px; height: 6px; background: var(--success); border-radius: 50%;
            animation: livePulse 2s ease-in-out infinite;
        }
        @keyframes livePulse { 0%,100% { opacity: 1; box-shadow: 0 0 0 0 rgba(0,209,102,0.4); } 50% { opacity: 0.5; box-shadow: 0 0 0 5px transparent; } }

        .honey-pill {
            background: var(--card-solid); border: 1px solid rgba(255,195,0,0.25);
            padding: 9px 20px; border-radius: 50px; font-weight: 800; font-size: 0.85rem;
            color: var(--honey); box-shadow: 0 0 16px var(--honey-glow);
            display: flex; align-items: center; gap: 7px;
            backdrop-filter: blur(10px);
        }

        /* === Nav === */
        nav {
            display: flex; gap: 3px; background: rgba(0,0,0,0.6); padding: 4px;
            border-radius: 50px; margin-bottom: 24px; position: relative; z-index: 2;
            border: 1px solid var(--glass-border); backdrop-filter: blur(20px);
        }
        .nav-btn {
            background: transparent; border: none; color: var(--text-dim);
            padding: 10px 18px; border-radius: 40px; cursor: pointer; font-weight: 700;
            font-size: 0.8rem; font-family: inherit;
        }
        .nav-btn:hover { color: var(--text); }
        .nav-btn.active {
            background: linear-gradient(135deg, var(--honey), #f59e0b);
            color: #000; box-shadow: 0 4px 12px var(--honey-glow);
        }

        /* === Main === */
        main { width: 100%; max-width: 1020px; padding: 0 20px 60px; position: relative; z-index: 2; }
        .tab-content { display: none; animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
        .tab-content.active { display: grid; grid-template-columns: 1fr 1fr; gap: 18px; }
        @media (max-width: 850px) { .tab-content.active { grid-template-columns: 1fr; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* === Cards === */
        .card {
            background: var(--card); border-radius: 20px; padding: 24px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 6px 28px rgba(0,0,0,0.3);
            backdrop-filter: blur(12px); position: relative; overflow: hidden;
        }
        .card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.06), transparent);
        }
        .card:hover { border-color: rgba(255,255,255,0.09); transform: translateY(-1px); }
        h3 {
            margin: 0 0 2px 0; font-size: 1.05rem;
            display: flex; align-items: center; gap: 9px; font-weight: 800;
        }
        .card-sub { font-size: 0.73rem; color: var(--text-dim); margin-bottom: 14px; }
        .full-span { grid-column: 1 / -1; }

        /* === SVG Gauge === */
        .gauge-container { position: relative; width: 155px; height: 155px; margin: 12px auto; }
        .gauge-svg { width: 100%; height: 100%; transform: rotate(-90deg); }
        .gauge-bg { fill: none; stroke: rgba(255,255,255,0.05); stroke-width: 10; }
        .gauge-fill { fill: none; stroke-width: 10; stroke-linecap: round; filter: drop-shadow(0 0 6px var(--honey-glow)); }
        .gauge-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
        .gauge-temp { font-size: 1.9rem; font-weight: 900; display: block; line-height: 1; }
        .gauge-label { font-size: 0.6rem; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; opacity: 0.45; margin-top: 4px; display: block; }

        /* === Sensor Grid === */
        .sensor-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 14px 0; }
        .sensor-item {
            background: rgba(255,255,255,0.025); border-radius: 12px; padding: 12px 6px;
            text-align: center; border: 1px solid rgba(255,255,255,0.03);
        }
        .sensor-icon { font-size: 1.2rem; margin-bottom: 3px; }
        .sensor-val { font-size: 0.9rem; font-weight: 800; display: block; }
        .sensor-name { font-size: 0.6rem; color: var(--text-dim); font-weight: 600; margin-top: 1px; }

        /* === AI Suggestion Cards === */
        .ai-section { margin-top: 0; }
        .ai-header {
            display: flex; align-items: center; gap: 8px; margin-bottom: 12px;
        }
        .ai-badge {
            background: linear-gradient(135deg, var(--purple), #8b5cf6);
            padding: 3px 10px; border-radius: 20px; font-size: 0.6rem;
            font-weight: 800; color: #fff; letter-spacing: 0.5px;
        }
        .ai-card {
            background: rgba(255,255,255,0.025); border-radius: 14px; padding: 14px 16px;
            border: 1px solid rgba(255,255,255,0.04); margin-bottom: 10px;
            display: flex; gap: 12px; align-items: flex-start; cursor: pointer;
        }
        .ai-card:hover { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.08); }
        .ai-card.implemented { border-color: rgba(0,209,102,0.25); background: var(--success-dim); }
        .ai-icon-box {
            width: 36px; height: 36px; border-radius: 10px; display: flex;
            align-items: center; justify-content: center; font-size: 1rem; flex-shrink: 0;
        }
        .ai-card-body { flex: 1; }
        .ai-card-title { font-weight: 700; font-size: 0.85rem; margin-bottom: 2px; }
        .ai-card-desc { font-size: 0.73rem; color: var(--text-dim); line-height: 1.4; }
        .ai-card-meta {
            display: flex; gap: 10px; margin-top: 6px; font-size: 0.65rem; font-weight: 700;
        }
        .ai-tag {
            padding: 2px 8px; border-radius: 6px; font-size: 0.62rem; font-weight: 700;
        }
        .ai-tag.save { background: var(--success-dim); color: var(--success); }
        .ai-tag.auto { background: var(--accent-dim); color: var(--accent); }
        .ai-tag.honey { background: var(--warning-dim); color: var(--honey); }
        .ai-action-btn {
            background: linear-gradient(135deg, var(--honey), #f59e0b);
            color: #000; border: none; padding: 6px 14px; border-radius: 8px;
            font-weight: 800; cursor: pointer; font-size: 0.72rem; font-family: inherit;
            margin-top: 8px; box-shadow: 0 2px 8px var(--honey-glow);
        }
        .ai-action-btn:hover { transform: scale(1.03); }
        .ai-action-btn.done { background: var(--success); color: #fff; pointer-events: none; }

        /* === Energy Flow (Sankey-lite) === */
        .energy-flow { margin-top: 10px; }
        .flow-row {
            display: flex; align-items: center; gap: 10px; margin-bottom: 8px;
        }
        .flow-label { font-size: 0.75rem; font-weight: 600; width: 90px; text-align: right; }
        .flow-bar-bg {
            flex: 1; height: 26px; background: rgba(255,255,255,0.04);
            border-radius: 6px; overflow: hidden; position: relative;
        }
        .flow-bar-fill {
            height: 100%; border-radius: 6px; display: flex; align-items: center;
            padding-left: 10px; font-size: 0.68rem; font-weight: 800; color: #000;
            animation: flowGrow 1s cubic-bezier(0.16, 1, 0.3, 1);
        }
        @keyframes flowGrow { from { width: 0 !important; } }
        .flow-pct { font-size: 0.7rem; font-weight: 700; color: var(--text-dim); min-width: 36px; text-align: right; }
        .flow-waste-indicator {
            position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
            font-size: 0.6rem; font-weight: 800; color: var(--danger);
        }

        /* === Privacy Banner === */
        .privacy-banner {
            background: rgba(59,130,246,0.06); border: 1px solid rgba(59,130,246,0.15);
            border-radius: 14px; padding: 14px 16px; margin-top: 14px;
            display: flex; gap: 12px; align-items: flex-start;
        }
        .privacy-icon { font-size: 1.5rem; flex-shrink: 0; }
        .privacy-title { font-weight: 700; font-size: 0.82rem; margin-bottom: 2px; }
        .privacy-desc { font-size: 0.7rem; color: var(--text-dim); line-height: 1.45; }
        .privacy-tags { display: flex; gap: 6px; margin-top: 6px; flex-wrap: wrap; }
        .p-tag {
            background: var(--accent-dim); color: var(--accent); padding: 3px 8px;
            border-radius: 6px; font-size: 0.6rem; font-weight: 700;
        }

        /* === Predicted Pattern === */
        .pattern-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; margin-top: 10px; }
        .pattern-cell {
            aspect-ratio: 1; border-radius: 6px; display: flex; align-items: center;
            justify-content: center; font-size: 0.55rem; font-weight: 700; cursor: default;
            position: relative;
        }
        .pattern-cell .pt-tip {
            display: none; position: absolute; bottom: 110%; left: 50%; transform: translateX(-50%);
            background: #1e293b; padding: 4px 8px; border-radius: 6px; font-size: 0.6rem;
            white-space: nowrap; z-index: 10;
        }
        .pattern-cell:hover .pt-tip { display: block; }
        .pattern-labels { display: flex; justify-content: space-between; font-size: 0.58rem; color: var(--text-dim); margin-top: 4px; font-weight: 600; }
        .pattern-legend {
            display: flex; gap: 10px; margin-top: 8px; font-size: 0.6rem; color: var(--text-dim); font-weight: 600;
        }
        .legend-dot { width: 10px; height: 10px; border-radius: 3px; display: inline-block; margin-right: 3px; vertical-align: middle; }

        /* === Building Blueprint === */
        .blueprint {
            display: grid; grid-template-areas: "r1 r1 r2" "r1 r1 r3" "r4 r5 r3";
            gap: 8px; height: 310px; margin-top: 14px;
        }
        .room {
            border: 2px solid #222a38; border-radius: 12px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: rgba(255,255,255,0.015); cursor: pointer; font-size: 0.82rem; font-weight: 600;
            position: relative; overflow: hidden;
        }
        .room small { font-weight: 400; opacity: 0.65; margin-top: 2px; font-size: 0.7rem; }
        .room:hover { border-color: var(--honey); background: rgba(255,195,0,0.03); }
        .room.bad { border-color: var(--danger); background: var(--danger-dim); animation: pulseRed 2s infinite; }
        .room.good { border-color: rgba(0,209,102,0.35); background: rgba(0, 209, 102, 0.05); }
        .room .room-temp { position: absolute; top: 6px; right: 8px; font-size: 0.6rem; color: var(--text-dim); font-weight: 700; }
        .room .room-pwr { position: absolute; bottom: 6px; right: 8px; font-size: 0.58rem; color: var(--text-dim); font-weight: 600; }
        @keyframes pulseRed { 0%,100% { background: var(--danger-dim); } 50% { background: rgba(255,77,77,0.2); } }

        /* === IoT Timeline === */
        .iot-timeline { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
        .iot-event {
            display: flex; align-items: center; gap: 10px; padding: 9px 12px;
            background: rgba(255,255,255,0.025); border-radius: 10px;
            border-left: 3px solid var(--honey); font-size: 0.78rem;
        }
        .iot-event .iot-time { color: var(--text-dim); font-weight: 700; font-size: 0.68rem; min-width: 38px; }
        .iot-event.alert { border-left-color: var(--danger); }
        .iot-event.success { border-left-color: var(--success); }
        .iot-event.auto { border-left-color: var(--accent); }

        /* === Automatic Actions Log === */
        .auto-actions { margin-top: 12px; }
        .auto-action-item {
            display: flex; align-items: center; gap: 10px; padding: 10px 14px;
            background: rgba(255,255,255,0.025); border-radius: 12px; margin-bottom: 6px;
            border: 1px solid rgba(255,255,255,0.03);
        }
        .auto-icon { font-size: 1.3rem; }
        .auto-body { flex: 1; }
        .auto-title { font-weight: 700; font-size: 0.82rem; }
        .auto-desc { font-size: 0.68rem; color: var(--text-dim); }
        .auto-saved {
            font-size: 0.7rem; font-weight: 800; color: var(--success);
            background: var(--success-dim); padding: 4px 10px; border-radius: 8px;
        }

        /* === Comparison Graph === */
        .graph-box { margin-top: 16px; }
        .bar-container { display: flex; align-items: flex-end; justify-content: center; height: 150px; gap: 20px; }
        .bar-wrapper { display: flex; flex-direction: column; align-items: center; flex: 1; max-width: 90px; }
        .bar { width: 100%; border-radius: 8px 8px 3px 3px; animation: growBar 1.2s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes growBar { from { height: 0 !important; } }
        .bar-normal { background: linear-gradient(to top, #2d3748, #5a6782); height: 140px; }
        .bar-bee { background: linear-gradient(to top, #d97706, var(--honey)); height: 82px; box-shadow: 0 6px 20px var(--honey-glow); }
        .bar-label { font-size: 0.68rem; color: var(--text-dim); margin-top: 8px; font-weight: 700; text-align: center; }
        .bar-value { margin-bottom: 6px; font-weight: 900; font-size: 0.85rem; }
        .savings-badge {
            display: inline-flex; align-items: center; gap: 6px;
            background: var(--success-dim); color: var(--success);
            padding: 7px 14px; border-radius: 50px; font-size: 0.78rem; font-weight: 800;
            margin: 12px auto 0;
        }

        /* === Sparkline === */
        .sparkline-row { display: flex; align-items: flex-end; gap: 2px; height: 45px; margin-top: 14px; }
        .spark-bar { flex: 1; border-radius: 2px 2px 0 0; min-width: 3px; background: rgba(255,195,0,0.2); }
        .spark-bar.current { background: var(--honey); box-shadow: 0 0 5px var(--honey-glow); }
        .spark-labels { display: flex; justify-content: space-between; font-size: 0.55rem; color: var(--text-dim); margin-top: 3px; }

        /* === Impact Translator === */
        .impact-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-top: 12px; }
        .impact-item {
            background: rgba(255,255,255,0.025); border-radius: 12px; padding: 14px 8px;
            text-align: center; border: 1px solid rgba(255,255,255,0.03);
        }
        .impact-emoji { font-size: 1.5rem; margin-bottom: 4px; }
        .impact-val { font-size: 1.1rem; font-weight: 900; color: var(--success); }
        .impact-label { font-size: 0.6rem; color: var(--text-dim); font-weight: 600; margin-top: 2px; line-height: 1.3; }

        /* === CO2 Stat === */
        .co2-stat {
            display: flex; align-items: center; gap: 14px; padding: 14px;
            background: var(--success-dim); border-radius: 14px; border: 1px solid rgba(0,209,102,0.12);
            margin-top: 12px;
        }
        .co2-icon { font-size: 2rem; }
        .co2-val { font-size: 1.5rem; font-weight: 900; color: var(--success); line-height: 1; }
        .co2-label { font-size: 0.68rem; color: var(--text-dim); font-weight: 600; }

        /* === IoT Architecture Diagram === */
        .arch-flow {
            display: flex; align-items: center; justify-content: space-between; gap: 0;
            padding: 10px 0;
        }
        .arch-node {
            display: flex; flex-direction: column; align-items: center; gap: 4px;
            flex: 1; text-align: center;
        }
        .arch-icon-box {
            width: 44px; height: 44px; border-radius: 12px; display: flex;
            align-items: center; justify-content: center; font-size: 1.3rem;
        }
        .arch-label { font-size: 0.62rem; font-weight: 700; color: var(--text-dim); }
        .arch-arrow { color: var(--text-dim); font-size: 0.8rem; opacity: 0.4; margin: 0 -4px; }

        /* === Shop === */
        .shop-grid { display: grid; gap: 10px; }
        .shop-item {
            background: rgba(255,255,255,0.025); padding: 16px 18px; border-radius: 14px;
            display: flex; align-items: center; gap: 14px;
            border: 1px solid rgba(255,255,255,0.04);
        }
        .shop-item:hover { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.08); }
        .shop-item-icon { font-size: 1.6rem; }
        .shop-item-info { flex: 1; }
        .shop-item-info strong { font-size: 0.9rem; }
        .shop-item-info small { color: var(--text-dim); display: block; margin-top: 1px; font-size: 0.72rem; }
        .buy-btn {
            background: linear-gradient(135deg, var(--honey), #f59e0b);
            color: #000; border: none; padding: 9px 16px;
            border-radius: 10px; font-weight: 800; cursor: pointer; font-size: 0.78rem;
            font-family: inherit; white-space: nowrap;
            box-shadow: 0 3px 10px var(--honey-glow);
        }
        .buy-btn:hover { transform: scale(1.04); }
        .buy-btn:active { transform: scale(0.97); }
        .buy-btn.sold { background: var(--success); pointer-events: none; color: #fff; box-shadow: none; }

        /* === Leaderboard === */
        .leaderboard { margin-top: 12px; }
        .lb-row {
            display: flex; align-items: center; gap: 10px; padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.03); font-size: 0.82rem;
        }
        .lb-row:last-child { border-bottom: none; }
        .lb-rank {
            width: 26px; height: 26px; border-radius: 7px; display: flex;
            align-items: center; justify-content: center; font-weight: 900; font-size: 0.72rem;
            background: rgba(255,255,255,0.05); color: var(--text-dim); flex-shrink: 0;
        }
        .lb-rank.gold { background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #000; }
        .lb-rank.silver { background: linear-gradient(135deg, #94a3b8, #64748b); color: #fff; }
        .lb-rank.bronze { background: linear-gradient(135deg, #d97706, #b45309); color: #fff; }
        .lb-row.you { background: rgba(255,195,0,0.07); margin: 0 -12px; padding: 10px 12px; border-radius: 10px; }
        .lb-name { flex: 1; font-weight: 600; }
        .lb-pts { color: var(--honey); font-weight: 800; font-size: 0.78rem; }
        .lb-trend { font-size: 0.65rem; font-weight: 700; margin-left: 4px; }
        .lb-trend.up { color: var(--success); }
        .lb-trend.down { color: var(--danger); }

        /* === Modes === */
        .mode-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 14px; }
        .mode-btn {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06);
            color: white; padding: 14px; border-radius: 12px; cursor: pointer;
            font-weight: 700; font-family: inherit; font-size: 0.82rem;
        }
        .mode-btn:hover { background: rgba(255,255,255,0.06); }
        .mode-btn.active {
            background: linear-gradient(135deg, var(--honey), #f59e0b);
            color: #000; border-color: var(--honey); box-shadow: 0 3px 12px var(--honey-glow);
        }

        /* === Badges === */
        .achievement-bar { display: flex; gap: 6px; margin-top: 12px; flex-wrap: wrap; }
        .badge {
            width: 34px; height: 34px; border-radius: 8px; display: flex;
            align-items: center; justify-content: center; font-size: 1rem;
            background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.05);
            position: relative;
        }
        .badge.earned { background: linear-gradient(135deg, rgba(255,195,0,0.12), rgba(245,158,11,0.08)); border-color: rgba(255,195,0,0.25); }
        .badge.locked { opacity: 0.3; filter: grayscale(1); }
        .badge-tooltip {
            display: none; position: absolute; bottom: 110%; left: 50%; transform: translateX(-50%);
            background: #1e293b; padding: 4px 8px; border-radius: 6px; font-size: 0.6rem;
            white-space: nowrap; font-weight: 600; z-index: 10;
        }
        .badge:hover .badge-tooltip { display: block; }

        /* === Insight Card (Weekly) === */
        .insight-card {
            background: linear-gradient(135deg, rgba(255,195,0,0.06), rgba(245,158,11,0.02));
            border: 1px solid rgba(255,195,0,0.12); border-radius: 14px;
            padding: 16px; margin-top: 12px;
        }
        .insight-title { font-weight: 800; font-size: 0.85rem; margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
        .insight-bullets { list-style: none; padding: 0; }
        .insight-bullets li {
            padding: 5px 0; font-size: 0.75rem; color: var(--text-dim);
            border-bottom: 1px solid rgba(255,255,255,0.03); display: flex; align-items: center; gap: 8px;
        }
        .insight-bullets li:last-child { border-bottom: none; }
        .insight-bullets li span.il { color: var(--text); font-weight: 700; }

        /* === Toast === */
        .toast {
            position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%) translateY(100px);
            background: var(--card-solid); border: 1px solid var(--glass-border);
            padding: 12px 24px; border-radius: 14px; font-weight: 700; font-size: 0.85rem;
            box-shadow: 0 16px 40px rgba(0,0,0,0.5); z-index: 9999;
            backdrop-filter: blur(20px); opacity: 0;
            display: flex; align-items: center; gap: 8px;
        }
        .toast.show { animation: toastIn 0.4s forwards, toastOut 0.4s 2.8s forwards; }
        @keyframes toastIn { to { transform: translateX(-50%) translateY(0); opacity: 1; } }
        @keyframes toastOut { to { transform: translateX(-50%) translateY(100px); opacity: 0; } }

        .floating-h {
            position: fixed; color: var(--honey); font-weight: 900; pointer-events: none; font-size: 1.1rem;
            z-index: 1000; animation: floatUp 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            text-shadow: 0 0 8px var(--honey-glow);
        }
        @keyframes floatUp { to { transform: translateY(-110px) scale(1.2); opacity: 0; } }

        /* === Responsive === */
        @media (max-width: 600px) {
            header { padding: 14px 16px; }
            .logo-text { font-size: 1.1rem; }
            nav { gap: 1px; padding: 3px; flex-wrap: wrap; border-radius: 16px; justify-content: center; }
            .nav-btn { padding: 8px 12px; font-size: 0.72rem; }
            .sensor-grid { grid-template-columns: repeat(2, 1fr); }
            .impact-grid { grid-template-columns: 1fr 1fr; }
            .blueprint { height: 260px; }
            .arch-flow { flex-wrap: wrap; gap: 6px; }
            .arch-arrow { display: none; }
        }
    </style>
</head>
<body>

<div class="bg-pattern"></div>
<div class="bg-glow"></div>
<div class="bg-glow-2"></div>

<header>
    <div class="logo-group">
        <div class="logo-hex"></div>
        <div class="logo-text"><span>BEE</span> EFFICIENT</div>
    </div>
    <div class="header-right">
        <div class="live-badge"><div class="live-dot"></div> 12 Sensorer Live</div>
        <div class="honey-pill">üçØ <span id="honey-val">450</span> HONEY</div>
    </div>
</header>

<nav>
    <button class="nav-btn active" onclick="showTab('hybel', this)">Min Hybel</button>
    <button class="nav-btn" onclick="showTab('ai', this)">ü§ñ BeeAI</button>
    <button class="nav-btn" onclick="showTab('bygg', this)">Byggoversikt</button>
    <button class="nav-btn" onclick="showTab('innsikt', this)">Innsikt</button>
    <button class="nav-btn" onclick="showTab('shop', this)">Honey Shop</button>
</nav>

<main>
    <!-- ========== TAB 1 ‚Äî MIN HYBEL ========== -->
    <section id="tab-hybel" class="tab-content active">
        <div class="card">
            <h3>üè† Kube 4B ‚Äî Din Hybel</h3>
            <p class="card-sub">Sanntidsdata fra 4 IoT-sensorer i din enhet</p>

            <div class="gauge-container">
                <svg class="gauge-svg" viewBox="0 0 120 120">
                    <circle class="gauge-bg" cx="60" cy="60" r="50"/>
                    <circle class="gauge-fill" cx="60" cy="60" r="50"
                        stroke="url(#gaugeGrad)" id="gauge-arc"
                        stroke-dasharray="314" stroke-dashoffset="96"/>
                    <defs>
                        <linearGradient id="gaugeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="#f59e0b"/>
                            <stop offset="100%" stop-color="#fbbf24"/>
                        </linearGradient>
                    </defs>
                </svg>
                <div class="gauge-text">
                    <span class="gauge-temp" id="temp-display">21.5¬∞</span>
                    <span class="gauge-label" id="temp-label">OPTIMAL</span>
                </div>
            </div>

            <div class="sensor-grid">
                <div class="sensor-item">
                    <div class="sensor-icon">üí®</div>
                    <span class="sensor-val" id="air-val" style="color:var(--success)">623</span>
                    <div class="sensor-name">CO‚ÇÇ ppm</div>
                </div>
                <div class="sensor-item">
                    <div class="sensor-icon">‚ö°</div>
                    <span class="sensor-val" id="power-val">0.34</span>
                    <div class="sensor-name">kW n√•</div>
                </div>
                <div class="sensor-item">
                    <div class="sensor-icon">üíß</div>
                    <span class="sensor-val" id="humidity-val">44%</span>
                    <div class="sensor-name">Fuktighet</div>
                </div>
                <div class="sensor-item">
                    <div class="sensor-icon">üí°</div>
                    <span class="sensor-val" id="lux-val">320</span>
                    <div class="sensor-name">Lux</div>
                </div>
            </div>

            <div class="mode-grid">
                <button class="mode-btn active" onclick="setMode('hjemme', this)">üè† Hjemme</button>
                <button class="mode-btn" onclick="setMode('bort', this)">‚úàÔ∏è Bortreist (+50 üçØ)</button>
                <button class="mode-btn" onclick="setMode('natt', this)">üåô Nattmodus</button>
                <button class="mode-btn" onclick="setMode('lese', this)">üìñ Lesemodus</button>
            </div>

            <div class="achievement-bar">
                <div class="badge earned">üå± <span class="badge-tooltip">Gr√∏nn Start</span></div>
                <div class="badge earned">‚ö° <span class="badge-tooltip">Str√∏msparer</span></div>
                <div class="badge earned">üèÜ <span class="badge-tooltip">Topp 10</span></div>
                <div class="badge locked">üî• <span class="badge-tooltip">7-dagers streak</span></div>
                <div class="badge locked">üíé <span class="badge-tooltip">1000 Honey</span></div>
                <div class="badge locked">üåç <span class="badge-tooltip">CO‚ÇÇ Champion</span></div>
            </div>
        </div>

        <div class="card">
            <h3>üìä Str√∏mkostnad ‚Äî Februar</h3>
            <p class="card-sub">Sammenligning med og uten Bee Efficient</p>
            <div class="graph-box">
                <div class="bar-container">
                    <div class="bar-wrapper">
                        <span class="bar-value">412 kr</span>
                        <div class="bar bar-normal"></div>
                        <span class="bar-label">Uten Bee</span>
                    </div>
                    <div class="bar-wrapper">
                        <span class="bar-value" style="color:var(--honey)">238 kr</span>
                        <div class="bar bar-bee" id="my-bar"></div>
                        <span class="bar-label">Med Bee</span>
                    </div>
                </div>
            </div>
            <div style="text-align:center;">
                <div class="savings-badge">üìâ Du sparer 42% ‚Äî 174 kr/mnd</div>
            </div>

            <div style="margin-top:18px;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:6px;">
                    <span style="font-size:0.72rem; font-weight:700; color:var(--text-dim);">Forbruk siste 24t (kW)</span>
                    <span style="font-size:0.6rem; color:var(--text-dim);">N√Ö ‚Üí</span>
                </div>
                <div class="sparkline-row" id="sparkline"></div>
                <div class="spark-labels"><span>00:00</span><span>06:00</span><span>12:00</span><span>18:00</span><span>N√•</span></div>
            </div>

            <div class="co2-stat">
                <div class="co2-icon">üåç</div>
                <div>
                    <div class="co2-val">12.4 kg</div>
                    <div class="co2-label">CO‚ÇÇ spart denne m√•neden</div>
                </div>
            </div>

            <!-- Privacy Banner ‚Äî directly addresses hackathon requirement -->
            <div class="privacy-banner">
                <div class="privacy-icon">üîí</div>
                <div>
                    <div class="privacy-title">Vi overv√•ker rom, ikke mennesker</div>
                    <div class="privacy-desc">Bee Efficient bruker kun anonyme rombaserte sensorer. Vi m√•ler temperatur, CO‚ÇÇ, fuktighet og str√∏m ‚Äî aldri kamera, lyd eller personlige enheter.</div>
                    <div class="privacy-tags">
                        <span class="p-tag">Ingen kamera</span>
                        <span class="p-tag">Anonymisert</span>
                        <span class="p-tag">Aggregert data</span>
                        <span class="p-tag">GDPR</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== TAB 2 ‚Äî BeeAI ========== -->
    <section id="tab-ai" class="tab-content">
        <div class="card full-span">
            <div class="ai-header">
                <h3>ü§ñ BeeAI ‚Äî Smarte Forslag</h3>
                <span class="ai-badge">KI-DREVET</span>
            </div>
            <p class="card-sub">Konkrete tiltak basert p√• sensordata. Trykk for √• implementere automatisk.</p>

            <div class="ai-section">
                <!-- AI Suggestion 1 -->
                <div class="ai-card" id="ai-1" onclick="implementAI(1, this, event)">
                    <div class="ai-icon-box" style="background:var(--danger-dim);">üå°Ô∏è</div>
                    <div class="ai-card-body">
                        <div class="ai-card-title">Senk temperaturen til 20¬∞ i din kube</div>
                        <div class="ai-card-desc">Sensoren viser 21.5¬∞ ‚Äî forskning viser at 20¬∞ er optimalt for s√∏vnkvalitet og energisparing. Estimert besparelse: <b>23 kr/mnd</b>.</div>
                        <div class="ai-card-meta">
                            <span class="ai-tag save">-23 kr/mnd</span>
                            <span class="ai-tag auto">Automatisk</span>
                            <span class="ai-tag honey">+30 üçØ</span>
                        </div>
                        <button class="ai-action-btn" id="ai-btn-1">Implementer</button>
                    </div>
                </div>

                <!-- AI Suggestion 2 -->
                <div class="ai-card" id="ai-2" onclick="implementAI(2, this, event)">
                    <div class="ai-icon-box" style="background:var(--warning-dim);">üí°</div>
                    <div class="ai-card-body">
                        <div class="ai-card-title">Sl√• p√• automatisk lys-dimming</div>
                        <div class="ai-card-desc">Lux-sensoren viser at dagslys (320 lux) dekker behovet ditt n√•. Vi foresl√•r automatisk dimming basert p√• dagslys for √• spare str√∏m.</div>
                        <div class="ai-card-meta">
                            <span class="ai-tag save">-15 kr/mnd</span>
                            <span class="ai-tag auto">Automatisk</span>
                            <span class="ai-tag honey">+20 üçØ</span>
                        </div>
                        <button class="ai-action-btn" id="ai-btn-2">Implementer</button>
                    </div>
                </div>

                <!-- AI Suggestion 3 -->
                <div class="ai-card" id="ai-3" onclick="implementAI(3, this, event)">
                    <div class="ai-icon-box" style="background:var(--accent-dim);">üåÄ</div>
                    <div class="ai-card-body">
                        <div class="ai-card-title">Optimaliser ventilasjon etter CO‚ÇÇ-niv√•</div>
                        <div class="ai-card-desc">CO‚ÇÇ er 623 ppm (godt under 1000-grensen). Ventilasjonen kan reduseres 40% uten √• p√•virke luftkvalitet ‚Äî basert p√• 14 dagers sensordata.</div>
                        <div class="ai-card-meta">
                            <span class="ai-tag save">-31 kr/mnd</span>
                            <span class="ai-tag auto">Automatisk</span>
                            <span class="ai-tag honey">+25 üçØ</span>
                        </div>
                        <button class="ai-action-btn" id="ai-btn-3">Implementer</button>
                    </div>
                </div>

                <!-- AI Suggestion 4 -->
                <div class="ai-card" id="ai-4" onclick="implementAI(4, this, event)">
                    <div class="ai-icon-box" style="background:var(--purple-dim);">üìÖ</div>
                    <div class="ai-card-body">
                        <div class="ai-card-title">Auto-sparemodus basert p√• l√¶rt timeplan</div>
                        <div class="ai-card-desc">Vi ser at du vanligvis er borte man‚Äìfre 08:00‚Äì16:00. Systemet kan automatisk sl√• p√• sparemodus i disse timene ‚Äî l√¶rt fra dine bruksm√∏nstre.</div>
                        <div class="ai-card-meta">
                            <span class="ai-tag save">-67 kr/mnd</span>
                            <span class="ai-tag auto">L√¶rt av data</span>
                            <span class="ai-tag honey">+50 üçØ</span>
                        </div>
                        <button class="ai-action-btn" id="ai-btn-4">Implementer</button>
                    </div>
                </div>

                <!-- AI Suggestion 5 ‚Äî Building -->
                <div class="ai-card" id="ai-5" onclick="implementAI(5, this, event)">
                    <div class="ai-icon-box" style="background:var(--success-dim);">üè¢</div>
                    <div class="ai-card-body">
                        <div class="ai-card-title">Rapporter: Auditorium B sl√∏ser energi</div>
                        <div class="ai-card-desc">Bevegelsessensor viser tomt rom i 2t 14min, men lys og ventilasjon er fullt p√•. Rapporter til driftspersonell for automatisk justering.</div>
                        <div class="ai-card-meta">
                            <span class="ai-tag save">-14.50 kr/t</span>
                            <span class="ai-tag auto">Driftsvarsel</span>
                            <span class="ai-tag honey">+100 üçØ</span>
                        </div>
                        <button class="ai-action-btn" id="ai-btn-5">Rapporter & Optimaliser</button>
                    </div>
                </div>
            </div>

            <div style="text-align:center; margin-top:16px; padding: 12px; background: rgba(255,195,0,0.04); border-radius: 12px; border: 1px solid rgba(255,195,0,0.08);">
                <div style="font-size:0.75rem; color:var(--text-dim);">Total mulig besparelse med alle forslag:</div>
                <div style="font-size:1.5rem; font-weight:900; color:var(--honey); margin-top:4px;" id="total-save">136 kr/mnd</div>
                <div style="font-size:0.65rem; color:var(--text-dim); margin-top:2px;">+ 225 üçØ i bel√∏nning</div>
            </div>
        </div>
    </section>

    <!-- ========== TAB 3 ‚Äî BYGGOVERSIKT ========== -->
    <section id="tab-bygg" class="tab-content">
        <div class="card">
            <h3>üè¢ Campus ‚Äî 2. Etasje</h3>
            <p class="card-sub">Live romstatus fra bevegelse-, temp- og CO‚ÇÇ-sensorer</p>
            <div class="blueprint">
                <div class="room good" style="grid-area: r1">
                    Auditorium A<br><small>I bruk ‚Äî 34 pers.</small>
                    <span class="room-temp">21.2¬∞</span>
                    <span class="room-pwr">1.8 kW</span>
                </div>
                <div class="room good" style="grid-area: r2">
                    Lab 1<br><small>8 pers.</small>
                    <span class="room-temp">20.8¬∞</span>
                    <span class="room-pwr">0.9 kW</span>
                </div>
                <div class="room bad" id="aud-b" style="grid-area: r3" onclick="fixAud(event)">
                    Auditorium B<br><strong style="font-size:0.75rem">‚ö†Ô∏è TOMT ‚Äî SL√òSER</strong>
                    <span class="room-temp">23.1¬∞</span>
                    <span class="room-pwr">2.4 kW</span>
                </div>
                <div class="room good" style="grid-area: r4">
                    Kantine<br><small>Eco-modus</small>
                    <span class="room-temp">20.5¬∞</span>
                    <span class="room-pwr">0.6 kW</span>
                </div>
                <div class="room good" style="grid-area: r5">
                    Kontor<br><small>3 pers.</small>
                    <span class="room-temp">21.0¬∞</span>
                    <span class="room-pwr">0.4 kW</span>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>‚ö° Hvor Forsvinner Energien?</h3>
            <p class="card-sub">Sanntids energifordeling ‚Äî hele 2. etasje</p>
            <div class="energy-flow">
                <div class="flow-row">
                    <span class="flow-label">üå°Ô∏è Oppvarming</span>
                    <div class="flow-bar-bg">
                        <div class="flow-bar-fill" style="width:45%; background: linear-gradient(90deg, #f59e0b, #fbbf24);">45%</div>
                    </div>
                </div>
                <div class="flow-row">
                    <span class="flow-label">üí° Belysning</span>
                    <div class="flow-bar-bg">
                        <div class="flow-bar-fill" style="width:22%; background: linear-gradient(90deg, #3b82f6, #60a5fa);">22%</div>
                        <span class="flow-waste-indicator" id="light-waste">‚ö† 8% sl√∏sing</span>
                    </div>
                </div>
                <div class="flow-row">
                    <span class="flow-label">üåÄ Ventilasjon</span>
                    <div class="flow-bar-bg">
                        <div class="flow-bar-fill" style="width:25%; background: linear-gradient(90deg, #a78bfa, #c4b5fd);">25%</div>
                        <span class="flow-waste-indicator" id="vent-waste">‚ö† 12% sl√∏sing</span>
                    </div>
                </div>
                <div class="flow-row">
                    <span class="flow-label">üîå Utstyr</span>
                    <div class="flow-bar-bg">
                        <div class="flow-bar-fill" style="width:8%; background: linear-gradient(90deg, #64748b, #94a3b8);">8%</div>
                    </div>
                </div>
            </div>

            <div id="alert-box" style="background: var(--danger-dim); padding: 16px; border-radius: 14px; border: 1px solid rgba(255,77,77,0.2); margin-top: 14px;">
                <div style="font-weight:700; font-size:0.85rem; margin-bottom:8px;">üö® Avvik Detektert ‚Äî Auditorium B</div>
                <div style="font-size:0.78rem; color:var(--text-dim); margin-bottom: 10px;">
                    Bevegelsessensor: <b style="color:var(--text)">0 personer</b> i 2t 14min<br>
                    Lys: <b style="color:var(--danger)">100%</b> ¬∑ Ventilasjon: <b style="color:var(--danger)">Full</b> ¬∑ Temp: <b style="color:var(--danger)">23.1¬∞</b>
                </div>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 10px; font-size: 0.82rem;">
                    <span>üí∏ Un√∏dvendig tap:</span>
                    <strong style="color:var(--danger); font-size: 1rem;">14.50 kr/t</strong>
                </div>
                <button class="buy-btn" style="width:100%; padding:12px; font-size:0.85rem;" onclick="fixAud(event)">‚ö° OPTIMALISER N√Ö (+100 üçØ)</button>
            </div>
            <div id="fix-msg" style="display:none; text-align:center; color:var(--success); margin-top:14px; padding: 18px; background: var(--success-dim); border-radius: 14px; border: 1px solid rgba(0,209,102,0.15);">
                <div style="font-size:1.8rem; margin-bottom:6px;">‚úÖ</div>
                <b>Bygget er n√• 100% effektivt!</b><br>
                <small style="color:var(--text-dim)">Lys ‚Üí 10% ¬∑ Ventilasjon ‚Üí Minimum ¬∑ Temp ‚Üí 19¬∞</small>
            </div>

            <div class="iot-timeline">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-top:12px; margin-bottom:2px;">‚è± Automatiske Hendelser i Dag</div>
                <div class="iot-event auto">
                    <span class="iot-time">07:58</span>
                    <span>ü§ñ Aud. A ‚Äî Varme √∏kt til 21¬∞ (forelesning kl 08)</span>
                </div>
                <div class="iot-event success">
                    <span class="iot-time">09:42</span>
                    <span>‚úÖ Kantine ‚Äî Ventilasjon auto-redusert (lavt belegg)</span>
                </div>
                <div class="iot-event alert">
                    <span class="iot-time">10:15</span>
                    <span>‚ö†Ô∏è Aud. B ‚Äî Tomt rom detektert, venter p√• handling</span>
                </div>
                <div class="iot-event auto">
                    <span class="iot-time">11:03</span>
                    <span>ü§ñ Lab 1 ‚Äî Temp justert til 20.8¬∞ (CO‚ÇÇ-basert)</span>
                </div>
                <div class="iot-event success">
                    <span class="iot-time">11:30</span>
                    <span>‚úÖ Kontor ‚Äî Lys dimmet 30% (dagslys tilstrekkelig)</span>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== TAB 4 ‚Äî INNSIKT ========== -->
    <section id="tab-innsikt" class="tab-content">
        <div class="card">
            <h3>üß† L√¶rte Bruksm√∏nstre</h3>
            <p class="card-sub">Systemet har l√¶rt ditt ukentlige m√∏nster fra 14 dagers sensordata</p>

            <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:6px;">Opptatthet i din kube (farge = str√∏mforbruk)</div>
            <div class="pattern-grid" id="pattern-heat"></div>
            <div class="pattern-labels">
                <span>Man</span><span>Tir</span><span>Ons</span><span>Tor</span><span>Fre</span><span>L√∏r</span><span>S√∏n</span>
            </div>
            <div class="pattern-legend">
                <span><span class="legend-dot" style="background:rgba(0,209,102,0.6)"></span>Lav</span>
                <span><span class="legend-dot" style="background:rgba(255,195,0,0.7)"></span>Middels</span>
                <span><span class="legend-dot" style="background:rgba(255,77,77,0.7)"></span>H√∏y</span>
                <span><span class="legend-dot" style="background:rgba(100,116,139,0.3)"></span>Borte</span>
            </div>

            <div class="insight-card">
                <div class="insight-title">üìã Ukesammendrag ‚Äî Uke 7</div>
                <ul class="insight-bullets">
                    <li>üìâ <span class="il">Str√∏m ned 12%</span> fra forrige uke</li>
                    <li>üïê <span class="il">Borte 42 timer</span> ‚Äî sparemodus aktiv 38t (90%)</li>
                    <li>üå°Ô∏è <span class="il">Snitttemp: 20.8¬∞</span> ‚Äî 0.7¬∞ lavere enn naboer</li>
                    <li>üí® <span class="il">CO‚ÇÇ alltid under 900 ppm</span> ‚Äî god luftkvalitet</li>
                    <li>üçØ <span class="il">+180 Honey tjent</span> ‚Äî bra jobbet!</li>
                </ul>
            </div>

            <div style="margin-top: 14px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:6px;">üìà Prediksjon neste uke</div>
                <div style="background:rgba(255,255,255,0.025); border-radius:12px; padding:14px; border: 1px solid rgba(255,255,255,0.04);">
                    <div style="display:flex; justify-content:space-between; font-size:0.8rem; margin-bottom:8px;">
                        <span>Estimert str√∏mkostnad:</span>
                        <strong style="color:var(--honey)">~52 kr</strong>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.8rem; margin-bottom:8px;">
                        <span>Estimert besparelse vs. snitt:</span>
                        <strong style="color:var(--success)">-38%</strong>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.8rem;">
                        <span>Potensielle Honey:</span>
                        <strong style="color:var(--honey)">~90 üçØ</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üåç Din Milj√∏p√•virkning</h3>
            <p class="card-sub">CO‚ÇÇ-besparelse oversatt til forst√•elige tall</p>

            <div class="impact-grid">
                <div class="impact-item">
                    <div class="impact-emoji">üå≥</div>
                    <div class="impact-val">2.1</div>
                    <div class="impact-label">Tr√¶r plantet (ekvivalent)</div>
                </div>
                <div class="impact-item">
                    <div class="impact-emoji">üöó</div>
                    <div class="impact-val">48 km</div>
                    <div class="impact-label">Bilkj√∏ring unng√•tt</div>
                </div>
                <div class="impact-item">
                    <div class="impact-emoji">üì±</div>
                    <div class="impact-val">1 490</div>
                    <div class="impact-label">Mobil-ladinger spart</div>
                </div>
            </div>

            <div class="co2-stat">
                <div class="co2-icon">üåç</div>
                <div>
                    <div class="co2-val">12.4 kg</div>
                    <div class="co2-label">CO‚ÇÇ spart denne m√•neden</div>
                </div>
            </div>

            <!-- IoT Architecture Pipeline -->
            <div style="margin-top:18px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:10px;">üîó Slik Fungerer Bee Efficient</div>
                <div class="arch-flow">
                    <div class="arch-node">
                        <div class="arch-icon-box" style="background:var(--accent-dim);">üì°</div>
                        <div class="arch-label">IoT Sensorer</div>
                    </div>
                    <span class="arch-arrow">‚Üí</span>
                    <div class="arch-node">
                        <div class="arch-icon-box" style="background:var(--purple-dim);">üß†</div>
                        <div class="arch-label">BeeAI Motor</div>
                    </div>
                    <span class="arch-arrow">‚Üí</span>
                    <div class="arch-node">
                        <div class="arch-icon-box" style="background:var(--warning-dim);">üí°</div>
                        <div class="arch-label">Smart Tiltak</div>
                    </div>
                    <span class="arch-arrow">‚Üí</span>
                    <div class="arch-node">
                        <div class="arch-icon-box" style="background:var(--success-dim);">‚úÖ</div>
                        <div class="arch-label">Auto-handling</div>
                    </div>
                    <span class="arch-arrow">‚Üí</span>
                    <div class="arch-node">
                        <div class="arch-icon-box" style="background:rgba(255,195,0,0.12);">üçØ</div>
                        <div class="arch-label">Bel√∏nning</div>
                    </div>
                </div>
            </div>

            <!-- Leaderboard -->
            <div style="margin-top:16px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:6px;">üèÜ Toppliste ‚Äî Februar 2026</div>
                <div class="leaderboard">
                    <div class="lb-row">
                        <div class="lb-rank gold">1</div>
                        <div class="lb-name">Kube 2A ‚Äî Maria & Erik</div>
                        <div class="lb-pts">1 240 üçØ</div>
                        <span class="lb-trend up">‚ñ≤2</span>
                    </div>
                    <div class="lb-row">
                        <div class="lb-rank silver">2</div>
                        <div class="lb-name">Kube 7C ‚Äî Jonas</div>
                        <div class="lb-pts">980 üçØ</div>
                        <span class="lb-trend down">‚ñº1</span>
                    </div>
                    <div class="lb-row">
                        <div class="lb-rank bronze">3</div>
                        <div class="lb-name">Kube 1D ‚Äî Sara & Nils</div>
                        <div class="lb-pts">870 üçØ</div>
                        <span class="lb-trend up">‚ñ≤1</span>
                    </div>
                    <div class="lb-row you">
                        <div class="lb-rank" style="background:var(--honey); color:#000;">4</div>
                        <div class="lb-name">Kube 4B ‚Äî <b>Du</b> üëà</div>
                        <div class="lb-pts" id="lb-your-pts">450 üçØ</div>
                        <span class="lb-trend up">‚ñ≤3</span>
                    </div>
                    <div class="lb-row">
                        <div class="lb-rank">5</div>
                        <div class="lb-name">Kube 5A ‚Äî Lina</div>
                        <div class="lb-pts">420 üçØ</div>
                        <span class="lb-trend down">‚ñº2</span>
                    </div>
                </div>
            </div>

            <!-- Automatic Actions Log -->
            <div class="auto-actions">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-top:14px; margin-bottom:8px;">ü§ñ Automatiske Handlinger ‚Äî Siste 7 Dager</div>
                <div class="auto-action-item">
                    <div class="auto-icon">üå°Ô∏è</div>
                    <div class="auto-body">
                        <div class="auto-title">Temp senket ved frav√¶r (√ó12)</div>
                        <div class="auto-desc">Automatisk 17¬∞ n√•r du var borte</div>
                    </div>
                    <div class="auto-saved">-34 kr</div>
                </div>
                <div class="auto-action-item">
                    <div class="auto-icon">üí°</div>
                    <div class="auto-body">
                        <div class="auto-title">Lys dimmet ved dagslys (√ó8)</div>
                        <div class="auto-desc">Lux-sensor detekterte nok dagslys</div>
                    </div>
                    <div class="auto-saved">-12 kr</div>
                </div>
                <div class="auto-action-item">
                    <div class="auto-icon">üåÄ</div>
                    <div class="auto-body">
                        <div class="auto-title">Ventilasjon redusert (√ó5)</div>
                        <div class="auto-desc">CO‚ÇÇ under 700 ppm, trygt √• redusere</div>
                    </div>
                    <div class="auto-saved">-18 kr</div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== TAB 5 ‚Äî HONEY SHOP ========== -->
    <section id="tab-shop" class="tab-content">
        <div class="card full-span">
            <h3>üõí Honey Shop</h3>
            <p class="card-sub">Veksle inn energisparingen din i faktiske bel√∏nninger hos partnere</p>
            <div class="shop-grid">
                <div class="shop-item">
                    <span class="shop-item-icon">‚òï</span>
                    <div class="shop-item-info">
                        <strong>Gratis valgfri kaffe</strong>
                        <small>Veksle inn hos SiS Kaf√©</small>
                    </div>
                    <button class="buy-btn" onclick="buy(500, this)">500 üçØ</button>
                </div>
                <div class="shop-item">
                    <span class="shop-item-icon">ü•ê</span>
                    <div class="shop-item-info">
                        <strong>Nystekt croissant</strong>
                        <small>Perfekt lesesnacks</small>
                    </div>
                    <button class="buy-btn" onclick="buy(750, this)">750 üçØ</button>
                </div>
                <div class="shop-item">
                    <span class="shop-item-icon">üé¨</span>
                    <div class="shop-item-info">
                        <strong>Kinobillett (Odeon)</strong>
                        <small>Gjelder alle hverdager</small>
                    </div>
                    <button class="buy-btn" onclick="buy(3000, this)">3000 üçØ</button>
                </div>
                <div class="shop-item">
                    <span class="shop-item-icon">üö≤</span>
                    <div class="shop-item-info">
                        <strong>24t Bysykkel-pass</strong>
                        <small>Byv√•gen gr√∏nn mobilitet</small>
                    </div>
                    <button class="buy-btn" onclick="buy(1200, this)">1200 üçØ</button>
                </div>
                <div class="shop-item">
                    <span class="shop-item-icon">üéß</span>
                    <div class="shop-item-info">
                        <strong>Spotify Premium ‚Äî 1 mnd</strong>
                        <small>Musikk for studie√∏ktene</small>
                    </div>
                    <button class="buy-btn" onclick="buy(5000, this)">5000 üçØ</button>
                </div>
                <div class="shop-item">
                    <span class="shop-item-icon">üå±</span>
                    <div class="shop-item-info">
                        <strong>Plant et tre i ditt navn</strong>
                        <small>Samarbeid med One Tree Planted</small>
                    </div>
                    <button class="buy-btn" onclick="buy(2000, this)">2000 üçØ</button>
                </div>
            </div>
        </div>
    </section>
</main>

<div class="toast" id="toast"></div>

<script>
    let honey = 450;
    let aiImplemented = { 1: false, 2: false, 3: false, 4: false, 5: false };
    const aiRewards = { 1: 30, 2: 20, 3: 25, 4: 50, 5: 100 };
    const aiSavings = { 1: 23, 2: 15, 3: 31, 4: 67, 5: 0 };

    // === Sparkline ===
    function buildSparkline() {
        const el = document.getElementById('sparkline');
        const data = [15, 12, 8, 4, 3, 3, 5, 18, 28, 35, 30, 25, 22, 20, 19, 24, 28, 32, 30, 26, 22, 18, 16, 34];
        const max = Math.max(...data);
        el.innerHTML = data.map((v, i) =>
            `<div class="spark-bar ${i === data.length - 1 ? 'current' : ''}" style="height:${Math.max((v / max) * 100, 4)}%"></div>`
        ).join('');
    }
    buildSparkline();

    // === Heatmap Pattern ===
    function buildPattern() {
        const el = document.getElementById('pattern-heat');
        const labels = ['00‚Äì04', '04‚Äì08', '08‚Äì12', '12‚Äì16', '16‚Äì20', '20‚Äì24'];
        const data = [
            [0, 0, 0, 0, 0, 0, 0],
            [1, 1, 1, 1, 1, 0, 0],
            [0, 0, 0, 0, 0, 2, 1],
            [0, 0, 0, 0, 0, 1, 2],
            [2, 2, 3, 2, 1, 2, 2],
            [2, 1, 2, 1, 3, 2, 1],
        ];
        const colors = [
            'rgba(100,116,139,0.2)',
            'rgba(0,209,102,0.45)',
            'rgba(255,195,0,0.55)',
            'rgba(255,77,77,0.6)',
        ];
        const tipLabels = ['Borte/Sovende', 'Lavt forbruk', 'Middels', 'H√∏yt forbruk'];

        let html = '';
        data.forEach((row, ri) => {
            row.forEach((val, ci) => {
                html += `<div class="pattern-cell" style="background:${colors[val]}">
                    <span class="pt-tip">${labels[ri]}: ${tipLabels[val]}</span>
                </div>`;
            });
        });
        el.innerHTML = html;
    }
    buildPattern();

    // === Simulated Live Sensors ===
    function simulateSensors() {
        const power = document.getElementById('power-val');
        const humidity = document.getElementById('humidity-val');
        const co2 = document.getElementById('air-val');
        const lux = document.getElementById('lux-val');
        setInterval(() => {
            power.textContent = (0.34 + (Math.random() - 0.5) * 0.06).toFixed(2);
            humidity.textContent = (44 + Math.floor((Math.random() - 0.5) * 3)) + '%';
            co2.textContent = Math.floor(623 + (Math.random() - 0.5) * 40);
            lux.textContent = Math.floor(320 + (Math.random() - 0.5) * 30);
        }, 3500);
    }
    simulateSensors();

    // === Toast ===
    function showToast(msg, type = '') {
        const t = document.getElementById('toast');
        t.className = 'toast';
        t.innerHTML = msg;
        t.style.borderColor = type === 'success' ? 'rgba(0,209,102,0.3)' :
                              type === 'error' ? 'rgba(255,77,77,0.3)' : 'rgba(255,195,0,0.3)';
        void t.offsetWidth;
        t.classList.add('show');
        setTimeout(() => t.className = 'toast', 3400);
    }

    // === Tab Navigation ===
    function showTab(id, btn) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('tab-' + id).classList.add('active');
        btn.classList.add('active');
    }

    // === Mode Switch ===
    function setMode(mode, btn) {
        document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const temp = document.getElementById('temp-display');
        const label = document.getElementById('temp-label');
        const bar = document.getElementById('my-bar');
        const arc = document.getElementById('gauge-arc');

        const modes = {
            hjemme: { t: '21.5¬∞', l: 'OPTIMAL', h: '82px', off: '96', s: 'url(#gaugeGrad)', pwr: '0.34', air: '623', toast: 'üè† Normal modus aktiv' },
            bort:   { t: '17.0¬∞', l: 'SPAREMODUS', h: '40px', off: '190', s: 'var(--success)', pwr: '0.08', air: '410', toast: '‚úàÔ∏è Sparemodus ‚Äî temp ned, ventilasjon minimum', honey: 50 },
            natt:   { t: '19.0¬∞', l: 'NATTMODUS', h: '55px', off: '150', s: 'var(--accent)', pwr: '0.15', air: '580', toast: 'üåô Nattmodus ‚Äî 19¬∞, lys av, stille ventilasjon', honey: 15 },
            lese:   { t: '20.5¬∞', l: 'LESEMODUS', h: '68px', off: '120', s: 'var(--purple)', pwr: '0.28', air: '600', toast: 'üìñ Lesemodus ‚Äî optimal lys og stille ventilasjon' },
        };

        const m = modes[mode];
        temp.innerText = m.t;
        label.innerText = m.l;
        bar.style.height = m.h;
        arc.setAttribute('stroke-dashoffset', m.off);
        arc.style.stroke = m.s;
        document.getElementById('power-val').textContent = m.pwr;
        document.getElementById('air-val').textContent = m.air;
        showToast(m.toast, m.honey ? 'success' : '');
        if (m.honey) addHoney(m.honey, event);
    }

    // === Fix Building ===
    function fixAud(e) {
        const aud = document.getElementById('aud-b');
        if (aud.classList.contains('good')) return;
        aud.classList.remove('bad');
        aud.classList.add('good');
        aud.innerHTML = "Auditorium B<br><small>Optimalisert ‚úÖ</small><span class='room-temp'>19.5¬∞</span><span class='room-pwr'>0.3 kW</span>";
        document.getElementById('alert-box').style.display = 'none';
        document.getElementById('fix-msg').style.display = 'block';
        const lw = document.getElementById('light-waste'); if(lw) lw.style.display = 'none';
        const vw = document.getElementById('vent-waste'); if(vw) vw.style.display = 'none';
        addHoney(100, e);
        showToast('‚ö° Aud. B optimalisert ‚Äî sparer 14.50 kr/t!', 'success');
    }

    // === AI Implementation ===
    function implementAI(id, card, e) {
        if (aiImplemented[id]) return;
        aiImplemented[id] = true;
        card.classList.add('implemented');
        const btn = document.getElementById('ai-btn-' + id);
        btn.textContent = '‚úì Implementert';
        btn.classList.add('done');
        addHoney(aiRewards[id], e);

        if (id === 5) fixAud(e);

        let totalSaved = 0;
        for (let k in aiImplemented) {
            if (aiImplemented[k]) totalSaved += aiSavings[k];
        }
        const remaining = 136 - totalSaved;
        document.getElementById('total-save').textContent = remaining > 0 ?
            remaining + ' kr/mnd gjenst√•r' : '‚úÖ Alle tiltak implementert!';
        if (remaining <= 0) {
            document.getElementById('total-save').style.color = 'var(--success)';
        }

        showToast(`ü§ñ Tiltak implementert ‚Äî +${aiRewards[id]} üçØ`, 'success');
    }

    // === Buy Item ===
    function buy(price, btnEl) {
        if (honey >= price) {
            honey -= price;
            updateHoneyDisplay();
            btnEl.textContent = '‚úì Kj√∏pt';
            btnEl.classList.add('sold');
            showToast('üéâ Kj√∏p gjennomf√∏rt! Sjekk e-posten din.', 'success');
        } else {
            showToast('üçØ Trenger mer Honey! Spar str√∏m for √• tjene.', 'error');
        }
    }

    // === Honey System ===
    function updateHoneyDisplay() {
        const el = document.getElementById('honey-val');
        const target = honey;
        const start = parseInt(el.textContent) || 0;
        const diff = target - start;
        let step = 0;
        const steps = 18;
        const interval = setInterval(() => {
            step++;
            el.textContent = Math.round(start + (diff * step / steps));
            if (step >= steps) { el.textContent = target; clearInterval(interval); }
        }, 18);
        const lbPts = document.getElementById('lb-your-pts');
        if (lbPts) lbPts.textContent = honey + ' üçØ';
    }

    function addHoney(amount, e) {
        honey += amount;
        updateHoneyDisplay();
        if (e && e.pageX) {
            const float = document.createElement('div');
            float.className = 'floating-h no-transition';
            float.innerText = `+${amount} üçØ`;
            float.style.left = e.pageX + 'px';
            float.style.top = e.pageY + 'px';
            document.body.appendChild(float);
            setTimeout(() => float.remove(), 1200);
        }
        if (honey >= 1000) {
            document.querySelectorAll('.badge.locked').forEach(b => {
                if (b.textContent.includes('üíé')) {
                    b.classList.remove('locked'); b.classList.add('earned');
                    showToast('üèÖ Ny badge: Diamond Saver!', 'success');
                }
            });
        }
    }
    // === Register Service Worker (PWA) ===
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw.js')
            .then(r => console.log('SW registered:', r.scope))
            .catch(e => console.log('SW failed:', e));
    }
</script>
</body>
</html>
