<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bee Efficient ‚Äî Smart Energistyring</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffc300">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #06080c;
            --card: rgba(18, 24, 33, 0.88);
            --card-solid: #121821;
            --honey: #ffc300;
            --honey-dark: #e6af00;
            --honey-glow: rgba(255, 195, 0, 0.22);
            --honey-glow-strong: rgba(255, 195, 0, 0.45);
            --success: #00d166;
            --success-dim: rgba(0, 209, 102, 0.12);
            --danger: #ff4d4d;
            --danger-dim: rgba(255, 77, 77, 0.10);
            --warning: #f59e0b;
            --warning-dim: rgba(245, 158, 11, 0.12);
            --text: #f1f5f9;
            --text-dim: #6b7a90;
            --accent: #3b82f6;
            --accent-dim: rgba(59, 130, 246, 0.12);
            --glass-border: rgba(255,255,255,0.06);
            --purple: #a78bfa;
            --purple-dim: rgba(167,139,250,0.12);
            --admin-accent: #06b6d4;
            --admin-accent-dim: rgba(6,182,212,0.12);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        *:not(.no-transition) { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; overflow-x: hidden; position: relative;
        }

        /* === Ambient Background === */
        .bg-pattern {
            position: fixed; inset: 0; z-index: 0; pointer-events: none; opacity: 0.025;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='56' height='100'%3E%3Cpath d='M28 66L0 50 0 16 28 0 56 16 56 50z' fill='none' stroke='%23ffc300' stroke-width='1'/%3E%3Cpath d='M28 100L0 84 0 50 28 34 56 50 56 84z' fill='none' stroke='%23ffc300' stroke-width='1'/%3E%3C/svg%3E");
            background-size: 56px 100px;
        }
        .bg-glow {
            position: fixed; top: -250px; left: 50%; transform: translateX(-50%);
            width: 900px; height: 700px; z-index: 0; pointer-events: none;
            background: radial-gradient(ellipse, rgba(255,195,0,0.05) 0%, transparent 65%);
        }
        .bg-glow-2 {
            position: fixed; bottom: -300px; right: -200px;
            width: 600px; height: 600px; z-index: 0; pointer-events: none;
            background: radial-gradient(ellipse, rgba(59,130,246,0.04) 0%, transparent 70%);
        }
        body.admin-mode .bg-glow {
            background: radial-gradient(ellipse, rgba(6,182,212,0.05) 0%, transparent 65%);
        }

        /* === Header === */
        header {
            width: 100%; max-width: 1100px; padding: 18px 30px;
            display: flex; justify-content: space-between; align-items: center;
            position: relative; z-index: 2;
        }
        .logo-group { display: flex; align-items: center; gap: 12px; }
        .logo-hex {
            width: 40px; height: 40px; position: relative;
            background: linear-gradient(135deg, var(--honey), #f59e0b);
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            display: flex; align-items: center; justify-content: center;
        }
        .logo-hex::after { content: "üêù"; position: absolute; font-size: 1rem; }
        .logo-text { font-size: 1.4rem; font-weight: 900; letter-spacing: -0.5px; }
        .logo-text span { color: var(--honey); }

        .header-right { display: flex; align-items: center; gap: 12px; }
        .live-badge {
            display: flex; align-items: center; gap: 6px;
            font-size: 0.65rem; font-weight: 700; color: var(--success);
            text-transform: uppercase; letter-spacing: 1.2px;
        }
        .live-dot {
            width: 6px; height: 6px; background: var(--success); border-radius: 50%;
            animation: livePulse 2s ease-in-out infinite;
        }
        @keyframes livePulse { 0%,100% { opacity: 1; box-shadow: 0 0 0 0 rgba(0,209,102,0.4); } 50% { opacity: 0.5; box-shadow: 0 0 0 5px transparent; } }

        .honey-pill {
            background: var(--card-solid); border: 1px solid rgba(255,195,0,0.25);
            padding: 9px 20px; border-radius: 50px; font-weight: 800; font-size: 0.85rem;
            color: var(--honey); box-shadow: 0 0 16px var(--honey-glow);
            display: flex; align-items: center; gap: 7px;
            backdrop-filter: blur(10px);
        }

        /* === Role Switcher === */
        .role-switcher {
            display: flex; align-items: center; gap: 0; background: rgba(0,0,0,0.6);
            border-radius: 50px; padding: 3px; border: 1px solid var(--glass-border);
            position: relative; z-index: 2; margin-bottom: 10px;
            backdrop-filter: blur(20px);
        }
        .role-btn {
            background: transparent; border: none; color: var(--text-dim);
            padding: 10px 22px; border-radius: 40px; cursor: pointer; font-weight: 700;
            font-size: 0.82rem; font-family: inherit; display: flex; align-items: center; gap: 7px;
        }
        .role-btn:hover { color: var(--text); }
        .role-btn.active-student {
            background: linear-gradient(135deg, var(--honey), #f59e0b);
            color: #000; box-shadow: 0 4px 12px var(--honey-glow);
        }
        .role-btn.active-admin {
            background: linear-gradient(135deg, var(--admin-accent), #0891b2);
            color: #fff; box-shadow: 0 4px 12px rgba(6,182,212,0.3);
        }
        .role-label {
            font-size: 0.6rem; font-weight: 800; color: var(--text-dim);
            text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 4px;
            text-align: center; position: relative; z-index: 2;
        }

        /* === Nav === */
        nav {
            display: flex; gap: 3px; background: rgba(0,0,0,0.6); padding: 4px;
            border-radius: 50px; margin-bottom: 24px; position: relative; z-index: 2;
            border: 1px solid var(--glass-border); backdrop-filter: blur(20px);
        }
        .nav-btn {
            background: transparent; border: none; color: var(--text-dim);
            padding: 10px 18px; border-radius: 40px; cursor: pointer; font-weight: 700;
            font-size: 0.8rem; font-family: inherit;
        }
        .nav-btn:hover { color: var(--text); }
        .nav-btn.active {
            background: linear-gradient(135deg, var(--honey), #f59e0b);
            color: #000; box-shadow: 0 4px 12px var(--honey-glow);
        }
        body.admin-mode .nav-btn.active {
            background: linear-gradient(135deg, var(--admin-accent), #0891b2);
            color: #fff; box-shadow: 0 4px 12px rgba(6,182,212,0.3);
        }

        /* === Main === */
        main { width: 100%; max-width: 1020px; padding: 0 20px 60px; position: relative; z-index: 2; }
        .tab-content { display: none; animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
        .tab-content.active { display: grid; grid-template-columns: 1fr 1fr; gap: 18px; }
        @media (max-width: 850px) { .tab-content.active { grid-template-columns: 1fr; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* === Cards === */
        .card {
            background: var(--card); border-radius: 20px; padding: 24px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 6px 28px rgba(0,0,0,0.3);
            backdrop-filter: blur(12px); position: relative; overflow: hidden;
        }
        .card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.06), transparent);
        }
        .card:hover { border-color: rgba(255,255,255,0.09); transform: translateY(-1px); }
        h3 {
            margin: 0 0 2px 0; font-size: 1.05rem;
            display: flex; align-items: center; gap: 9px; font-weight: 800;
        }
        .card-sub { font-size: 0.73rem; color: var(--text-dim); margin-bottom: 14px; }
        .full-span { grid-column: 1 / -1; }

        /* === SVG Gauge === */
        .gauge-container { position: relative; width: 155px; height: 155px; margin: 12px auto; }
        .gauge-svg { width: 100%; height: 100%; transform: rotate(-90deg); }
        .gauge-bg { fill: none; stroke: rgba(255,255,255,0.05); stroke-width: 10; }
        .gauge-fill { fill: none; stroke-width: 10; stroke-linecap: round; filter: drop-shadow(0 0 6px var(--honey-glow)); }
        .gauge-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
        .gauge-temp { font-size: 1.9rem; font-weight: 900; display: block; line-height: 1; }
        .gauge-label { font-size: 0.6rem; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; opacity: 0.45; margin-top: 4px; display: block; }

        /* === Sensor Grid === */
        .sensor-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 14px 0; }
        .sensor-item {
            background: rgba(255,255,255,0.025); border-radius: 12px; padding: 12px 6px;
            text-align: center; border: 1px solid rgba(255,255,255,0.03);
        }
        .sensor-icon { font-size: 1.2rem; margin-bottom: 3px; }
        .sensor-val { font-size: 0.9rem; font-weight: 800; display: block; }
        .sensor-name { font-size: 0.6rem; color: var(--text-dim); font-weight: 600; margin-top: 1px; }

        /* === AI Suggestion Cards === */
        .ai-section { margin-top: 0; }
        .ai-header {
            display: flex; align-items: center; gap: 8px; margin-bottom: 12px;
        }
        .ai-badge {
            background: linear-gradient(135deg, var(--purple), #8b5cf6);
            padding: 3px 10px; border-radius: 20px; font-size: 0.6rem;
            font-weight: 800; color: #fff; letter-spacing: 0.5px;
        }
        .ai-card {
            background: rgba(255,255,255,0.025); border-radius: 14px; padding: 14px 16px;
            border: 1px solid rgba(255,255,255,0.04); margin-bottom: 10px;
            display: flex; gap: 12px; align-items: flex-start; cursor: pointer;
        }
        .ai-card:hover { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.08); }
        .ai-card.implemented { border-color: rgba(0,209,102,0.25); background: var(--success-dim); }
        .ai-icon-box {
            width: 36px; height: 36px; border-radius: 10px; display: flex;
            align-items: center; justify-content: center; font-size: 1rem; flex-shrink: 0;
        }
        .ai-card-body { flex: 1; }
        .ai-card-title { font-weight: 700; font-size: 0.85rem; margin-bottom: 2px; }
        .ai-card-desc { font-size: 0.73rem; color: var(--text-dim); line-height: 1.4; }
        .ai-card-meta {
            display: flex; gap: 10px; margin-top: 6px; font-size: 0.65rem; font-weight: 700;
        }
        .ai-tag {
            padding: 2px 8px; border-radius: 6px; font-size: 0.62rem; font-weight: 700;
        }
        .ai-tag.save { background: var(--success-dim); color: var(--success); }
        .ai-tag.auto { background: var(--accent-dim); color: var(--accent); }
        .ai-tag.honey { background: var(--warning-dim); color: var(--honey); }
        .ai-tag.admin { background: var(--admin-accent-dim); color: var(--admin-accent); }
        .ai-action-btn {
            background: linear-gradient(135deg, var(--honey), #f59e0b);
            color: #000; border: none; padding: 6px 14px; border-radius: 8px;
            font-weight: 800; cursor: pointer; font-size: 0.72rem; font-family: inherit;
            margin-top: 8px; box-shadow: 0 2px 8px var(--honey-glow);
        }
        .ai-action-btn:hover { transform: scale(1.03); }
        .ai-action-btn.done { background: var(--success); color: #fff; pointer-events: none; }

        /* === Energy Flow === */
        .energy-flow { margin-top: 10px; }
        .flow-row {
            display: flex; align-items: center; gap: 10px; margin-bottom: 8px;
        }
        .flow-label { font-size: 0.75rem; font-weight: 600; width: 90px; text-align: right; }
        .flow-bar-bg {
            flex: 1; height: 26px; background: rgba(255,255,255,0.04);
            border-radius: 6px; overflow: hidden; position: relative;
        }
        .flow-bar-fill {
            height: 100%; border-radius: 6px; display: flex; align-items: center;
            padding-left: 10px; font-size: 0.68rem; font-weight: 800; color: #000;
            animation: flowGrow 1s cubic-bezier(0.16, 1, 0.3, 1);
        }
        @keyframes flowGrow { from { width: 0 !important; } }
        .flow-pct { font-size: 0.7rem; font-weight: 700; color: var(--text-dim); min-width: 36px; text-align: right; }
        .flow-waste-indicator {
            position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
            font-size: 0.6rem; font-weight: 800; color: var(--danger);
        }

        /* === Privacy Banner === */
        .privacy-banner {
            background: rgba(59,130,246,0.06); border: 1px solid rgba(59,130,246,0.15);
            border-radius: 14px; padding: 14px 16px; margin-top: 14px;
            display: flex; gap: 12px; align-items: flex-start;
        }
        .privacy-icon { font-size: 1.5rem; flex-shrink: 0; }
        .privacy-title { font-weight: 700; font-size: 0.82rem; margin-bottom: 2px; }
        .privacy-desc { font-size: 0.7rem; color: var(--text-dim); line-height: 1.45; }
        .privacy-tags { display: flex; gap: 6px; margin-top: 6px; flex-wrap: wrap; }
        .p-tag {
            background: var(--accent-dim); color: var(--accent); padding: 3px 8px;
            border-radius: 6px; font-size: 0.6rem; font-weight: 700;
        }

        /* === Predicted Pattern === */
        .pattern-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; margin-top: 10px; }
        .pattern-cell {
            aspect-ratio: 1; border-radius: 6px; display: flex; align-items: center;
            justify-content: center; font-size: 0.55rem; font-weight: 700; cursor: default;
            position: relative;
        }
        .pattern-cell .pt-tip {
            display: none; position: absolute; bottom: 110%; left: 50%; transform: translateX(-50%);
            background: #1e293b; padding: 4px 8px; border-radius: 6px; font-size: 0.6rem;
            white-space: nowrap; z-index: 10;
        }
        .pattern-cell:hover .pt-tip { display: block; }
        .pattern-labels { display: flex; justify-content: space-between; font-size: 0.58rem; color: var(--text-dim); margin-top: 4px; font-weight: 600; }
        .pattern-legend {
            display: flex; gap: 10px; margin-top: 8px; font-size: 0.6rem; color: var(--text-dim); font-weight: 600;
        }
        .legend-dot { width: 10px; height: 10px; border-radius: 3px; display: inline-block; margin-right: 3px; vertical-align: middle; }

        /* === Building Blueprint === */
        .blueprint {
            display: grid; grid-template-areas: "r1 r1 r2" "r1 r1 r3" "r4 r5 r3";
            gap: 8px; height: 310px; margin-top: 14px;
        }
        .room {
            border: 2px solid #222a38; border-radius: 12px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: rgba(255,255,255,0.015); cursor: pointer; font-size: 0.82rem; font-weight: 600;
            position: relative; overflow: hidden;
        }
        .room small { font-weight: 400; opacity: 0.65; margin-top: 2px; font-size: 0.7rem; }
        .room:hover { border-color: var(--honey); background: rgba(255,195,0,0.03); }
        .room.bad { border-color: var(--danger); background: var(--danger-dim); animation: pulseRed 2s infinite; }
        .room.good { border-color: rgba(0,209,102,0.35); background: rgba(0, 209, 102, 0.05); }
        .room .room-temp { position: absolute; top: 6px; right: 8px; font-size: 0.6rem; color: var(--text-dim); font-weight: 700; }
        .room .room-pwr { position: absolute; bottom: 6px; right: 8px; font-size: 0.58rem; color: var(--text-dim); font-weight: 600; }
        @keyframes pulseRed { 0%,100% { background: var(--danger-dim); } 50% { background: rgba(255,77,77,0.2); } }

        /* === IoT Timeline === */
        .iot-timeline { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
        .iot-event {
            display: flex; align-items: center; gap: 10px; padding: 9px 12px;
            background: rgba(255,255,255,0.025); border-radius: 10px;
            border-left: 3px solid var(--honey); font-size: 0.78rem;
        }
        .iot-event .iot-time { color: var(--text-dim); font-weight: 700; font-size: 0.68rem; min-width: 38px; }
        .iot-event.alert { border-left-color: var(--danger); }
        .iot-event.success { border-left-color: var(--success); }
        .iot-event.auto { border-left-color: var(--accent); }

        /* === Automatic Actions Log === */
        .auto-actions { margin-top: 12px; }
        .auto-action-item {
            display: flex; align-items: center; gap: 10px; padding: 10px 14px;
            background: rgba(255,255,255,0.025); border-radius: 12px; margin-bottom: 6px;
            border: 1px solid rgba(255,255,255,0.03);
        }
        .auto-icon { font-size: 1.3rem; }
        .auto-body { flex: 1; }
        .auto-title { font-weight: 700; font-size: 0.82rem; }
        .auto-desc { font-size: 0.68rem; color: var(--text-dim); }
        .auto-saved {
            font-size: 0.7rem; font-weight: 800; color: var(--success);
            background: var(--success-dim); padding: 4px 10px; border-radius: 8px;
        }

        /* === Comparison Graph === */
        .graph-box { margin-top: 16px; }
        .bar-container { display: flex; align-items: flex-end; justify-content: center; height: 150px; gap: 20px; }
        .bar-wrapper { display: flex; flex-direction: column; align-items: center; flex: 1; max-width: 90px; }
        .bar { width: 100%; border-radius: 8px 8px 3px 3px; animation: growBar 1.2s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes growBar { from { height: 0 !important; } }
        .bar-normal { background: linear-gradient(to top, #2d3748, #5a6782); height: 140px; }
        .bar-bee { background: linear-gradient(to top, #d97706, var(--honey)); height: 82px; box-shadow: 0 6px 20px var(--honey-glow); }
        .bar-label { font-size: 0.68rem; color: var(--text-dim); margin-top: 8px; font-weight: 700; text-align: center; }
        .bar-value { margin-bottom: 6px; font-weight: 900; font-size: 0.85rem; }
        .savings-badge {
            display: inline-flex; align-items: center; gap: 6px;
            background: var(--success-dim); color: var(--success);
            padding: 7px 14px; border-radius: 50px; font-size: 0.78rem; font-weight: 800;
            margin: 12px auto 0;
        }

        /* === Sparkline === */
        .sparkline-row { display: flex; align-items: flex-end; gap: 2px; height: 45px; margin-top: 14px; }
        .spark-bar { flex: 1; border-radius: 2px 2px 0 0; min-width: 3px; background: rgba(255,195,0,0.2); }
        .spark-bar.current { background: var(--honey); box-shadow: 0 0 5px var(--honey-glow); }
        .spark-labels { display: flex; justify-content: space-between; font-size: 0.55rem; color: var(--text-dim); margin-top: 3px; }

        /* === Impact Translator === */
        .impact-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-top: 12px; }
        .impact-item {
            background: rgba(255,255,255,0.025); border-radius: 12px; padding: 14px 8px;
            text-align: center; border: 1px solid rgba(255,255,255,0.03);
        }
        .impact-emoji { font-size: 1.5rem; margin-bottom: 4px; }
        .impact-val { font-size: 1.1rem; font-weight: 900; color: var(--success); }
        .impact-label { font-size: 0.6rem; color: var(--text-dim); font-weight: 600; margin-top: 2px; line-height: 1.3; }

        /* === CO2 Stat === */
        .co2-stat {
            display: flex; align-items: center; gap: 14px; padding: 14px;
            background: var(--success-dim); border-radius: 14px; border: 1px solid rgba(0,209,102,0.12);
            margin-top: 12px;
        }
        .co2-icon { font-size: 2rem; }
        .co2-val { font-size: 1.5rem; font-weight: 900; color: var(--success); line-height: 1; }
        .co2-label { font-size: 0.68rem; color: var(--text-dim); font-weight: 600; }

        /* === IoT Architecture Diagram === */
        .arch-flow {
            display: flex; align-items: center; justify-content: space-between; gap: 0;
            padding: 10px 0;
        }
        .arch-node {
            display: flex; flex-direction: column; align-items: center; gap: 4px;
            flex: 1; text-align: center;
        }
        .arch-icon-box {
            width: 44px; height: 44px; border-radius: 12px; display: flex;
            align-items: center; justify-content: center; font-size: 1.3rem;
        }
        .arch-label { font-size: 0.62rem; font-weight: 700; color: var(--text-dim); }
        .arch-arrow { color: var(--text-dim); font-size: 0.8rem; opacity: 0.4; margin: 0 -4px; }

        /* === Shop === */
        .shop-grid { display: grid; gap: 10px; }
        .shop-item {
            background: rgba(255,255,255,0.025); padding: 16px 18px; border-radius: 14px;
            display: flex; align-items: center; gap: 14px;
            border: 1px solid rgba(255,255,255,0.04);
        }
        .shop-item:hover { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.08); }
        .shop-item-icon { font-size: 1.6rem; }
        .shop-item-info { flex: 1; }
        .shop-item-info strong { font-size: 0.9rem; }
        .shop-item-info small { color: var(--text-dim); display: block; margin-top: 1px; font-size: 0.72rem; }
        .buy-btn {
            background: linear-gradient(135deg, var(--honey), #f59e0b);
            color: #000; border: none; padding: 9px 16px;
            border-radius: 10px; font-weight: 800; cursor: pointer; font-size: 0.78rem;
            font-family: inherit; white-space: nowrap;
            box-shadow: 0 3px 10px var(--honey-glow);
        }
        .buy-btn:hover { transform: scale(1.04); }
        .buy-btn:active { transform: scale(0.97); }
        .buy-btn.sold { background: var(--success); pointer-events: none; color: #fff; box-shadow: none; }

        /* === Leaderboard === */
        .leaderboard { margin-top: 12px; }
        .lb-row {
            display: flex; align-items: center; gap: 10px; padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.03); font-size: 0.82rem;
        }
        .lb-row:last-child { border-bottom: none; }
        .lb-rank {
            width: 26px; height: 26px; border-radius: 7px; display: flex;
            align-items: center; justify-content: center; font-weight: 900; font-size: 0.72rem;
            background: rgba(255,255,255,0.05); color: var(--text-dim); flex-shrink: 0;
        }
        .lb-rank.gold { background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #000; }
        .lb-rank.silver { background: linear-gradient(135deg, #94a3b8, #64748b); color: #fff; }
        .lb-rank.bronze { background: linear-gradient(135deg, #d97706, #b45309); color: #fff; }
        .lb-row.you { background: rgba(255,195,0,0.07); margin: 0 -12px; padding: 10px 12px; border-radius: 10px; }
        .lb-name { flex: 1; font-weight: 600; }
        .lb-pts { color: var(--honey); font-weight: 800; font-size: 0.78rem; }
        .lb-trend { font-size: 0.65rem; font-weight: 700; margin-left: 4px; }
        .lb-trend.up { color: var(--success); }
        .lb-trend.down { color: var(--danger); }

        /* === Modes === */
        .mode-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 14px; }
        .mode-btn {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06);
            color: white; padding: 14px; border-radius: 12px; cursor: pointer;
            font-weight: 700; font-family: inherit; font-size: 0.82rem;
        }
        .mode-btn:hover { background: rgba(255,255,255,0.06); }
        .mode-btn.active {
            background: linear-gradient(135deg, var(--honey), #f59e0b);
            color: #000; border-color: var(--honey); box-shadow: 0 3px 12px var(--honey-glow);
        }

        /* === Badges === */
        .achievement-bar { display: flex; gap: 6px; margin-top: 12px; flex-wrap: wrap; }
        .badge {
            width: 34px; height: 34px; border-radius: 8px; display: flex;
            align-items: center; justify-content: center; font-size: 1rem;
            background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.05);
            position: relative;
        }
        .badge.earned { background: linear-gradient(135deg, rgba(255,195,0,0.12), rgba(245,158,11,0.08)); border-color: rgba(255,195,0,0.25); }
        .badge.locked { opacity: 0.3; filter: grayscale(1); }
        .badge-tooltip {
            display: none; position: absolute; bottom: 110%; left: 50%; transform: translateX(-50%);
            background: #1e293b; padding: 4px 8px; border-radius: 6px; font-size: 0.6rem;
            white-space: nowrap; font-weight: 600; z-index: 10;
        }
        .badge:hover .badge-tooltip { display: block; }

        /* === Insight Card === */
        .insight-card {
            background: linear-gradient(135deg, rgba(255,195,0,0.06), rgba(245,158,11,0.02));
            border: 1px solid rgba(255,195,0,0.12); border-radius: 14px;
            padding: 16px; margin-top: 12px;
        }
        .insight-title { font-weight: 800; font-size: 0.85rem; margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
        .insight-bullets { list-style: none; padding: 0; }
        .insight-bullets li {
            padding: 5px 0; font-size: 0.75rem; color: var(--text-dim);
            border-bottom: 1px solid rgba(255,255,255,0.03); display: flex; align-items: center; gap: 8px;
        }
        .insight-bullets li:last-child { border-bottom: none; }
        .insight-bullets li span.il { color: var(--text); font-weight: 700; }

        /* === Toast === */
        .toast {
            position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%) translateY(100px);
            background: var(--card-solid); border: 1px solid var(--glass-border);
            padding: 12px 24px; border-radius: 14px; font-weight: 700; font-size: 0.85rem;
            box-shadow: 0 16px 40px rgba(0,0,0,0.5); z-index: 9999;
            backdrop-filter: blur(20px); opacity: 0;
            display: flex; align-items: center; gap: 8px;
        }
        .toast.show { animation: toastIn 0.4s forwards, toastOut 0.4s 2.8s forwards; }
        @keyframes toastIn { to { transform: translateX(-50%) translateY(0); opacity: 1; } }
        @keyframes toastOut { to { transform: translateX(-50%) translateY(100px); opacity: 0; } }

        .floating-h {
            position: fixed; color: var(--honey); font-weight: 900; pointer-events: none; font-size: 1.1rem;
            z-index: 1000; animation: floatUp 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            text-shadow: 0 0 8px var(--honey-glow);
        }
        @keyframes floatUp { to { transform: translateY(-110px) scale(1.2); opacity: 0; } }

        /* ==== ADMIN-SPECIFIC STYLES ==== */
        .admin-kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 16px; }
        .admin-kpi {
            background: rgba(255,255,255,0.025); border-radius: 14px; padding: 16px 12px;
            text-align: center; border: 1px solid rgba(255,255,255,0.04);
        }
        .admin-kpi-val { font-size: 1.4rem; font-weight: 900; line-height: 1.1; }
        .admin-kpi-label { font-size: 0.62rem; color: var(--text-dim); font-weight: 600; margin-top: 4px; }
        .admin-kpi-change { font-size: 0.6rem; font-weight: 800; margin-top: 2px; }
        .admin-kpi-change.up { color: var(--success); }
        .admin-kpi-change.down { color: var(--danger); }

        .building-list { display: grid; gap: 8px; margin-top: 12px; }
        .building-item {
            background: rgba(255,255,255,0.025); border-radius: 14px; padding: 16px;
            border: 1px solid rgba(255,255,255,0.04); display: flex; align-items: center; gap: 14px;
            cursor: pointer;
        }
        .building-item:hover { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.08); }
        .building-icon { font-size: 1.6rem; width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .building-body { flex: 1; }
        .building-name { font-weight: 700; font-size: 0.9rem; }
        .building-meta { font-size: 0.68rem; color: var(--text-dim); margin-top: 2px; }
        .building-status { padding: 5px 12px; border-radius: 8px; font-size: 0.7rem; font-weight: 800; white-space: nowrap; }
        .building-status.good { background: var(--success-dim); color: var(--success); }
        .building-status.warning { background: var(--warning-dim); color: var(--warning); }
        .building-status.bad { background: var(--danger-dim); color: var(--danger); }

        .policy-row {
            display: flex; align-items: center; justify-content: space-between;
            padding: 14px 16px; background: rgba(255,255,255,0.025); border-radius: 12px;
            margin-bottom: 8px; border: 1px solid rgba(255,255,255,0.04);
        }
        .policy-info { flex: 1; }
        .policy-name { font-weight: 700; font-size: 0.85rem; }
        .policy-desc { font-size: 0.68rem; color: var(--text-dim); margin-top: 2px; }
        .policy-toggle {
            width: 48px; height: 26px; border-radius: 13px; border: none;
            background: rgba(255,255,255,0.1); cursor: pointer; position: relative;
            flex-shrink: 0;
        }
        .policy-toggle::after {
            content: ''; position: absolute; top: 3px; left: 3px;
            width: 20px; height: 20px; border-radius: 50%;
            background: var(--text-dim); transition: all 0.3s;
        }
        .policy-toggle.on { background: var(--admin-accent); }
        .policy-toggle.on::after { left: 25px; background: #fff; }

        .alert-list { display: grid; gap: 8px; margin-top: 12px; }
        .alert-item {
            display: flex; align-items: flex-start; gap: 12px; padding: 14px 16px;
            border-radius: 14px; border: 1px solid rgba(255,255,255,0.04);
        }
        .alert-item.critical { background: var(--danger-dim); border-color: rgba(255,77,77,0.2); }
        .alert-item.warn { background: var(--warning-dim); border-color: rgba(245,158,11,0.2); }
        .alert-item.info { background: var(--accent-dim); border-color: rgba(59,130,246,0.2); }
        .alert-item.maint { background: var(--purple-dim); border-color: rgba(167,139,250,0.2); }
        .alert-icon { font-size: 1.3rem; flex-shrink: 0; }
        .alert-body { flex: 1; }
        .alert-title { font-weight: 700; font-size: 0.82rem; }
        .alert-desc { font-size: 0.7rem; color: var(--text-dim); margin-top: 2px; }
        .alert-time { font-size: 0.6rem; color: var(--text-dim); font-weight: 700; margin-top: 4px; }
        .alert-action {
            background: rgba(255,255,255,0.08); border: none; color: var(--text);
            padding: 6px 14px; border-radius: 8px; font-weight: 700; cursor: pointer;
            font-size: 0.72rem; font-family: inherit; white-space: nowrap;
        }
        .alert-action:hover { background: rgba(255,255,255,0.15); }

        .engagement-row {
            display: flex; align-items: center; gap: 12px; padding: 12px 14px;
            background: rgba(255,255,255,0.025); border-radius: 12px; margin-bottom: 8px;
            border: 1px solid rgba(255,255,255,0.04);
        }
        .engagement-avatar {
            width: 38px; height: 38px; border-radius: 10px; display: flex;
            align-items: center; justify-content: center; font-size: 1rem;
            background: rgba(255,255,255,0.04); font-weight: 800; flex-shrink: 0;
        }
        .engagement-body { flex: 1; }
        .engagement-name { font-weight: 700; font-size: 0.82rem; }
        .engagement-meta { font-size: 0.65rem; color: var(--text-dim); }
        .engagement-stat { text-align: right; }
        .engagement-val { font-weight: 900; font-size: 0.9rem; }
        .engagement-label { font-size: 0.58rem; color: var(--text-dim); font-weight: 600; }

        .admin-chart-bars { display: flex; align-items: flex-end; gap: 6px; height: 120px; margin-top: 14px; }
        .admin-chart-bar { flex: 1; border-radius: 4px 4px 0 0; animation: growBar 1.2s cubic-bezier(0.16, 1, 0.3, 1); }
        .admin-chart-labels { display: flex; justify-content: space-between; font-size: 0.55rem; color: var(--text-dim); margin-top: 4px; font-weight: 600; }

        /* === Responsive === */
        @media (max-width: 600px) {
            header { padding: 14px 16px; }
            .logo-text { font-size: 1.1rem; }
            nav { gap: 1px; padding: 3px; flex-wrap: wrap; border-radius: 16px; justify-content: center; }
            .nav-btn { padding: 8px 12px; font-size: 0.72rem; }
            .sensor-grid { grid-template-columns: repeat(2, 1fr); }
            .impact-grid { grid-template-columns: 1fr 1fr; }
            .blueprint { height: 260px; }
            .arch-flow { flex-wrap: wrap; gap: 6px; }
            .arch-arrow { display: none; }
            .admin-kpi-grid { grid-template-columns: repeat(2, 1fr); }
            .role-switcher { flex-direction: row; }
        }
    </style>
</head>
<body>

<div class="bg-pattern"></div>
<div class="bg-glow"></div>
<div class="bg-glow-2"></div>

<header>
    <div class="logo-group">
        <div class="logo-hex"></div>
        <div class="logo-text"><span>BEE</span> EFFICIENT</div>
    </div>
    <div class="header-right">
        <div class="live-badge"><div class="live-dot"></div> LIVE</div>
        <div class="honey-pill" id="honey-pill-wrap">üçØ <span id="honey-val">450</span> HONEY</div>
    </div>
</header>

<!-- ========== ROLE SWITCHER ========== -->
<div class="role-label">LOGG INN SOM</div>
<div class="role-switcher">
    <button class="role-btn active-student" id="role-student" onclick="switchRole('student')">üéì Student / Beboer</button>
    <button class="role-btn" id="role-admin" onclick="switchRole('admin')">üèõÔ∏è Skipnad / Drift</button>
</div>

<!-- ========== STUDENT NAV ========== -->
<nav id="nav-student">
    <button class="nav-btn active" onclick="showTab('hybel', this, 'student')">Min Hybel</button>
    <button class="nav-btn" onclick="showTab('ai', this, 'student')">ü§ñ BeeAI</button>
    <button class="nav-btn" onclick="showTab('shop', this, 'student')">Honey Shop</button>
</nav>

<!-- ========== ADMIN NAV ========== -->
<nav id="nav-admin" style="display:none;">
    <button class="nav-btn active" onclick="showTab('admin-dash', this, 'admin')">Dashboard</button>
    <button class="nav-btn" onclick="showTab('admin-student', this, 'admin')">Studentboliger</button>
    <button class="nav-btn" onclick="showTab('admin-campus', this, 'admin')">Campus / Uni</button>
    <button class="nav-btn" onclick="showTab('admin-okonomi', this, 'admin')">√òkonomi</button>
    <button class="nav-btn" onclick="showTab('admin-beboere', this, 'admin')">Boligoversikt</button>
    <button class="nav-btn" onclick="showTab('admin-varsler', this, 'admin')">Varsler</button>
</nav>

<main>

    <!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó -->
    <!-- ‚ïë          STUDENT / BEBOER TABS                  ‚ïë -->
    <!-- ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->

    <!-- ========== STUDENT TAB 1 ‚Äî MIN HYBEL ========== -->
    <section id="tab-hybel" class="tab-content active">
        <div class="card">
            <h3>üè† Kube 4B ‚Äî Din Hybel</h3>
            <p class="card-sub">Slik har du det akkurat n√• ‚Äî alt styres automatisk for deg</p>

            <!-- Comfort Score -->
            <div style="display:flex; align-items:center; gap:20px; margin:16px 0;">
                <div class="gauge-container" style="width:120px; height:120px; margin:0; flex-shrink:0;">
                    <svg class="gauge-svg" viewBox="0 0 120 120">
                        <circle class="gauge-bg" cx="60" cy="60" r="50"/>
                        <circle class="gauge-fill" cx="60" cy="60" r="50"
                            stroke="url(#gaugeGrad)" id="gauge-arc"
                            stroke-dasharray="314" stroke-dashoffset="44"/>
                        <defs>
                            <linearGradient id="gaugeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" stop-color="#00d166"/>
                                <stop offset="100%" stop-color="#34d399"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="gauge-text">
                        <span class="gauge-temp" id="comfort-score" style="font-size:1.6rem;">86</span>
                        <span class="gauge-label" id="comfort-label">KOMFORT</span>
                    </div>
                </div>
                <div style="flex:1;">
                    <div style="font-weight:800; font-size:1rem; margin-bottom:6px;" id="comfort-headline">üòä Perfekt stemning!</div>
                    <div style="font-size:0.75rem; color:var(--text-dim); line-height:1.5;" id="comfort-desc">Luften er frisk, temperaturen behagelig, og lyset er fint. BeeAI styrer alt i bakgrunnen.</div>
                </div>
            </div>

            <!-- Vibe indicators (translated from raw sensors) -->
            <div class="sensor-grid" style="grid-template-columns: repeat(4, 1fr);">
                <div class="sensor-item" id="vibe-air" style="border-color:rgba(0,209,102,0.15);">
                    <div class="sensor-icon">üåø</div>
                    <span class="sensor-val" style="color:var(--success); font-size:0.75rem;">Frisk</span>
                    <div class="sensor-name">Luftkvalitet</div>
                </div>
                <div class="sensor-item" id="vibe-temp" style="border-color:rgba(255,195,0,0.15);">
                    <div class="sensor-icon">üå°Ô∏è</div>
                    <span class="sensor-val" id="temp-display" style="color:var(--honey); font-size:0.75rem;">21.5¬∞</span>
                    <div class="sensor-name">Temperatur</div>
                </div>
                <div class="sensor-item" id="vibe-light" style="border-color:rgba(59,130,246,0.15);">
                    <div class="sensor-icon">‚òÄÔ∏è</div>
                    <span class="sensor-val" style="color:var(--accent); font-size:0.75rem;">Fint</span>
                    <div class="sensor-name">Lysforhold</div>
                </div>
                <div class="sensor-item" id="vibe-streak" style="border-color:rgba(167,139,250,0.15);">
                    <div class="sensor-icon">üî•</div>
                    <span class="sensor-val" style="color:var(--purple); font-size:0.75rem;">5 dager</span>
                    <div class="sensor-name">Streak</div>
                </div>
            </div>

            <!-- Daily Impact ‚Äî relatable -->
            <div style="margin-top:14px; padding:14px 16px; background:linear-gradient(135deg, rgba(0,209,102,0.06), rgba(0,209,102,0.02)); border-radius:14px; border:1px solid rgba(0,209,102,0.12);">
                <div style="font-weight:800; font-size:0.82rem; margin-bottom:10px;">üåç Din p√•virkning denne uka</div>
                <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px;">
                    <div style="text-align:center; background:rgba(0,0,0,0.15); border-radius:10px; padding:10px 6px;">
                        <div style="font-size:1.3rem;">‚òï</div>
                        <div style="font-weight:900; font-size:0.95rem; color:var(--success);">3.2</div>
                        <div style="font-size:0.58rem; color:var(--text-dim); font-weight:600;">Kopper kaffe spart</div>
                    </div>
                    <div style="text-align:center; background:rgba(0,0,0,0.15); border-radius:10px; padding:10px 6px;">
                        <div style="font-size:1.3rem;">üöó</div>
                        <div style="font-weight:900; font-size:0.95rem; color:var(--success);">28 km</div>
                        <div style="font-size:0.58rem; color:var(--text-dim); font-weight:600;">Bilkj√∏ring i CO‚ÇÇ</div>
                    </div>
                    <div style="text-align:center; background:rgba(0,0,0,0.15); border-radius:10px; padding:10px 6px;">
                        <div style="font-size:1.3rem;">üå≥</div>
                        <div style="font-weight:900; font-size:0.95rem; color:var(--success);">0.4</div>
                        <div style="font-size:0.58rem; color:var(--text-dim); font-weight:600;">Tr√¶r i absorpsjon</div>
                    </div>
                </div>
            </div>

            <!-- Mode selector -->
            <div style="margin-top:14px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:6px;">üéõÔ∏è Velg modus for hybelen din</div>
                <div class="mode-grid">
                    <button class="mode-btn active" onclick="setMode('hjemme', this)">üè† Hjemme</button>
                    <button class="mode-btn" onclick="setMode('bort', this)">‚úàÔ∏è Bortreist (+50 üçØ)</button>
                    <button class="mode-btn" onclick="setMode('natt', this)">üåô Nattmodus</button>
                    <button class="mode-btn" onclick="setMode('lese', this)">üìñ Lesemodus</button>
                </div>
            </div>

            <!-- Badges / Achievements -->
            <div style="margin-top:14px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:6px;">üèÖ Dine badges</div>
                <div class="achievement-bar">
                    <div class="badge earned">üå± <span class="badge-tooltip">Gr√∏nn Start</span></div>
                    <div class="badge earned">‚ö° <span class="badge-tooltip">Str√∏msparer</span></div>
                    <div class="badge earned">üèÜ <span class="badge-tooltip">Topp 10</span></div>
                    <div class="badge locked">üî• <span class="badge-tooltip">7-dagers streak (2 igjen!)</span></div>
                    <div class="badge locked">üíé <span class="badge-tooltip">1000 Honey (550 igjen)</span></div>
                    <div class="badge locked">üåç <span class="badge-tooltip">CO‚ÇÇ Champion</span></div>
                </div>
            </div>

            <!-- Daily tip -->
            <div style="margin-top:14px; padding:12px 14px; background:rgba(255,195,0,0.04); border-radius:12px; border:1px solid rgba(255,195,0,0.1); display:flex; gap:10px; align-items:center;">
                <span style="font-size:1.3rem;">üí°</span>
                <div>
                    <div style="font-weight:700; font-size:0.78rem;">Dagens tips</div>
                    <div style="font-size:0.7rem; color:var(--text-dim);">Visste du at BeeAI automatisk dimmer lyset n√•r dagslyset er sterkt nok? Du sparer energi uten √• merke det!</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üèÜ Toppliste ‚Äî Februar 2026</h3>
            <p class="card-sub">Frivillig leaderboard ‚Äî delta og se hvor din kube ligger! Inspirert av fellesskap, ikke konkurranse.</p>

            <!-- Opt-in banner -->
            <div style="background:rgba(255,195,0,0.05); border:1px solid rgba(255,195,0,0.15); border-radius:12px; padding:12px 14px; margin-bottom:14px; display:flex; align-items:center; gap:10px;">
                <span style="font-size:1.3rem;">‚úã</span>
                <div style="flex:1;">
                    <div style="font-weight:700; font-size:0.82rem;">Du deltar frivillig</div>
                    <div style="font-size:0.68rem; color:var(--text-dim);">Kun kubenavn vises ‚Äî ingen persondata. Du kan melde deg av n√•r som helst.</div>
                </div>
                <button class="policy-toggle on" onclick="togglePolicy(this)" style="flex-shrink:0;"></button>
            </div>

            <!-- Top 3 podium -->
            <div style="display:flex; align-items:flex-end; justify-content:center; gap:12px; margin-bottom:16px; padding:10px 0;">
                <div style="text-align:center;">
                    <div style="font-size:1.5rem;">ü•à</div>
                    <div style="background:linear-gradient(135deg, #94a3b8, #64748b); border-radius:12px 12px 0 0; padding:16px 14px 10px; min-width:80px;">
                        <div style="font-weight:800; font-size:0.78rem; color:#fff;">Kube 7C</div>
                        <div style="font-size:0.65rem; color:rgba(255,255,255,0.7);">Jonas</div>
                    </div>
                    <div style="font-weight:800; font-size:0.75rem; color:var(--honey); margin-top:4px;">980 üçØ</div>
                </div>
                <div style="text-align:center;">
                    <div style="font-size:1.8rem;">üëë</div>
                    <div style="background:linear-gradient(135deg, #fbbf24, #f59e0b); border-radius:12px 12px 0 0; padding:22px 14px 10px; min-width:90px; box-shadow:0 4px 16px var(--honey-glow);">
                        <div style="font-weight:900; font-size:0.85rem; color:#000;">Kube 2A</div>
                        <div style="font-size:0.65rem; color:rgba(0,0,0,0.6);">Maria & Erik</div>
                    </div>
                    <div style="font-weight:900; font-size:0.85rem; color:var(--honey); margin-top:4px;">1 240 üçØ</div>
                </div>
                <div style="text-align:center;">
                    <div style="font-size:1.5rem;">ü•â</div>
                    <div style="background:linear-gradient(135deg, #d97706, #b45309); border-radius:12px 12px 0 0; padding:12px 14px 10px; min-width:80px;">
                        <div style="font-weight:800; font-size:0.78rem; color:#fff;">Kube 1D</div>
                        <div style="font-size:0.65rem; color:rgba(255,255,255,0.7);">Sara & Nils</div>
                    </div>
                    <div style="font-weight:800; font-size:0.75rem; color:var(--honey); margin-top:4px;">870 üçØ</div>
                </div>
            </div>

            <!-- Full leaderboard -->
            <div class="leaderboard">
                <div class="lb-row you" style="border:1px solid rgba(255,195,0,0.2); margin-bottom:6px;">
                    <div class="lb-rank" style="background:var(--honey); color:#000;">4</div>
                    <div class="lb-name">Kube 4B ‚Äî <b>Du</b> üëà</div>
                    <div class="lb-pts" id="lb-your-pts">450 üçØ</div>
                    <span class="lb-trend up">‚ñ≤3</span>
                </div>


            <!-- Weekly challenge (Strava-inspired) -->
            <div style="margin-top:14px; background:linear-gradient(135deg, rgba(255,195,0,0.06), rgba(245,158,11,0.02)); border:1px solid rgba(255,195,0,0.12); border-radius:14px; padding:14px 16px;">
                <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
                    <span style="font-size:1.2rem;">üî•</span>
                    <div>
                        <div style="font-weight:800; font-size:0.85rem;">Ukens Challenge ‚Äî Uke 7</div>
                        <div style="font-size:0.68rem; color:var(--text-dim);">Spar mest energi mens du er borte</div>
                    </div>
                </div>
                <div style="display:flex; justify-content:space-between; font-size:0.78rem; margin-bottom:6px;">
                    <span>Din fremgang:</span>
                    <strong style="color:var(--honey);">68% av m√•l</strong>
                </div>
                <div style="background:rgba(255,255,255,0.05); border-radius:6px; height:8px; overflow:hidden;">
                    <div style="height:100%; width:68%; background:linear-gradient(90deg, var(--honey), #f59e0b); border-radius:6px;"></div>
                </div>
                <div style="font-size:0.65rem; color:var(--text-dim); margin-top:6px;">Premie: 200 üçØ + ‚òï Gratis kaffe hos SiS</div>
            </div>

            <div class="co2-stat">
                <div class="co2-icon">üåç</div>
                <div>
                    <div class="co2-val">12.4 kg</div>
                    <div class="co2-label">CO‚ÇÇ spart denne m√•neden</div>
                    <div class="co2-label">Dette tilsvarer 80-100km bil!</div>
                </div>
            </div>

            <div class="privacy-banner">
                <div class="privacy-icon">üîí</div>
                <div>
                    <div class="privacy-title">Vi overv√•ker rom, ikke mennesker</div>
                    <div class="privacy-desc">Bee Efficient bruker kun anonyme rombaserte sensorer. Vi m√•ler temperatur, CO‚ÇÇ, fuktighet og str√∏m ‚Äî aldri kamera, lyd eller personlige enheter.</div>
                    <div class="privacy-tags">
                        <span class="p-tag">Ingen kamera</span>
                        <span class="p-tag">Anonymisert</span>
                        <span class="p-tag">Aggregert data</span>
                        <span class="p-tag">GDPR</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== STUDENT TAB 2 ‚Äî BeeAI ========== -->
    <section id="tab-ai" class="tab-content">
        <div class="card full-span">
            <div class="ai-header">
                <h3>ü§ñ BeeAI ‚Äî Smarte Forslag</h3>
                <span class="ai-badge">KI-DREVET</span>
            </div>
            <p class="card-sub">Personlige tiltak basert p√• dine sensordata. Trykk for √• implementere.</p>

            <div class="ai-section">
                <div class="ai-card" id="ai-1" onclick="implementAI(1, this, event)">
                    <div class="ai-icon-box" style="background:var(--danger-dim);">üå°Ô∏è</div>
                    <div class="ai-card-body">
                        <div class="ai-card-title">Senk temperaturen til 20¬∞ i din kube</div>
                        <div class="ai-card-desc">Sensoren viser 21.5¬∞ ‚Äî forskning viser at 20¬∞ er optimalt for s√∏vnkvalitet og energisparing.</div>
                        <div class="ai-card-meta">
                            <span class="ai-tag save">-23 kr/mnd</span>
                            <span class="ai-tag auto">Automatisk</span>
                            <span class="ai-tag honey">+30 üçØ</span>
                        </div>
                        <button class="ai-action-btn" id="ai-btn-1">Implementer</button>
                    </div>
                </div>

                <div class="ai-card" id="ai-2" onclick="implementAI(2, this, event)">
                    <div class="ai-icon-box" style="background:var(--warning-dim);">üí°</div>
                    <div class="ai-card-body">
                        <div class="ai-card-title">Sl√• p√• automatisk lys-dimming</div>
                        <div class="ai-card-desc">Lux-sensoren viser at dagslys (320 lux) dekker behovet ditt n√•. Vi foresl√•r automatisk dimming basert p√• dagslys for √• spare str√∏m.</div>
                        <div class="ai-card-meta">
                            <span class="ai-tag save">-15 kr/mnd</span>
                            <span class="ai-tag auto">Automatisk</span>
                            <span class="ai-tag honey">+20 üçØ</span>
                        </div>
                        <button class="ai-action-btn" id="ai-btn-2">Implementer</button>
                    </div>
                </div>

                <div class="ai-card" id="ai-3" onclick="implementAI(3, this, event)">
                    <div class="ai-icon-box" style="background:var(--accent-dim);">üåÄ</div>
                    <div class="ai-card-body">
                        <div class="ai-card-title">Optimaliser ventilasjon etter CO‚ÇÇ-niv√•</div>
                        <div class="ai-card-desc">CO‚ÇÇ er 623 ppm (godt under 1000-grensen). Ventilasjonen kan reduseres 40% uten √• p√•virke luftkvalitet ‚Äî basert p√• 14 dagers sensordata.</div>
                        <div class="ai-card-meta">
                            <span class="ai-tag save">-31 kr/mnd</span>
                            <span class="ai-tag auto">Automatisk</span>
                            <span class="ai-tag honey">+25 üçØ</span>
                        </div>
                        <button class="ai-action-btn" id="ai-btn-3">Implementer</button>
                    </div>
                </div>

                <div class="ai-card" id="ai-4" onclick="implementAI(4, this, event)">
                    <div class="ai-icon-box" style="background:var(--purple-dim);">üìÖ</div>
                    <div class="ai-card-body">
                        <div class="ai-card-title">Auto-sparemodus basert p√• l√¶rt timeplan</div>
                        <div class="ai-card-desc">Vi ser at du vanligvis er borte man‚Äìfre 08:00‚Äì16:00. Systemet kan automatisk sl√• p√• sparemodus i disse timene ‚Äî l√¶rt fra dine bruksm√∏nstre.</div>
                        <div class="ai-card-meta">
                            <span class="ai-tag save">-67 kr/mnd</span>
                            <span class="ai-tag auto">L√¶rt av data</span>
                            <span class="ai-tag honey">+50 üçØ</span>
                        </div>
                        <button class="ai-action-btn" id="ai-btn-4">Implementer</button>
                    </div>
                </div>
            </div>

            <div style="text-align:center; margin-top:16px; padding: 12px; background: rgba(255,195,0,0.04); border-radius: 12px; border: 1px solid rgba(255,195,0,0.08);">
                <div style="font-size:0.75rem; color:var(--text-dim);">Total mulig opptjening med alle forslag:</div>
                <div style="font-size:1.5rem; font-weight:900; color:var(--honey); margin-top:4px;" id="total-save">125 üçØ i bel√∏nning</div>
            </div>
        </div>
    </section>

    <!-- ========== STUDENT TAB 4 ‚Äî HONEY SHOP ========== -->
    <section id="tab-shop" class="tab-content">
        <div class="card full-span">
            <h3>üõí Honey Shop</h3>
            <p class="card-sub">Veksle inn energisparingen din i faktiske bel√∏nninger hos partnere</p>
            <div class="shop-grid">
                <div class="shop-item">
                    <span class="shop-item-icon">‚òï</span>
                    <div class="shop-item-info">
                        <strong>Gratis valgfri kaffe</strong>
                        <small>Veksle inn hos SiS Kaf√©</small>
                    </div>
                    <button class="buy-btn" onclick="buy(500, this)">500 üçØ</button>
                </div>
                <div class="shop-item">
                    <span class="shop-item-icon">ü•ê</span>
                    <div class="shop-item-info">
                        <strong>Nystekt croissant</strong>
                        <small>Perfekt lesesnacks</small>
                    </div>
                    <button class="buy-btn" onclick="buy(750, this)">750 üçØ</button>
                </div>
                <div class="shop-item">
                    <span class="shop-item-icon">üé¨</span>
                    <div class="shop-item-info">
                        <strong>Kinobillett (Odeon)</strong>
                        <small>Gjelder alle hverdager</small>
                    </div>
                    <button class="buy-btn" onclick="buy(3000, this)">3000 üçØ</button>
                </div>
                <div class="shop-item">
                    <span class="shop-item-icon">üö≤</span>
                    <div class="shop-item-info">
                        <strong>24t Bysykkel-pass</strong>
                        <small>Byv√•gen gr√∏nn mobilitet</small>
                    </div>
                    <button class="buy-btn" onclick="buy(1200, this)">1200 üçØ</button>
                </div>
                <div class="shop-item">
                    <span class="shop-item-icon">üéß</span>
                    <div class="shop-item-info">
                        <strong>Spotify Premium ‚Äî 1 mnd</strong>
                        <small>Musikk for studie√∏ktene</small>
                    </div>
                    <button class="buy-btn" onclick="buy(5000, this)">5000 üçØ</button>
                </div>
                <div class="shop-item">
                    <span class="shop-item-icon">üå±</span>
                    <div class="shop-item-info">
                        <strong>Plant et tre i ditt navn</strong>
                        <small>Samarbeid med One Tree Planted</small>
                    </div>
                    <button class="buy-btn" onclick="buy(2000, this)">2000 üçØ</button>
                </div>
            </div>
        </div>
    </section>


    <!-- ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó -->
    <!-- ‚ïë     ADMIN / SKIPNAD / DRIFT TABS                ‚ïë -->
    <!-- ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù -->

    <!-- ========== ADMIN TAB 1 ‚Äî DASHBOARD ========== -->
    <section id="tab-admin-dash" class="tab-content">
        <div class="card full-span">
            <h3>üìä Driftsoversikt ‚Äî Studentsamskipnaden i Stavanger</h3>
            <p class="card-sub">Samlet oversikt for studentboliger og campus ‚Äî Februar 2026</p>

            <div class="admin-kpi-grid">
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--admin-accent);">847</div>
                    <div class="admin-kpi-label">Studentboliger</div>
                    <div class="admin-kpi-change up">‚ñ≤ 23 denne mnd</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--success);">-34%</div>
                    <div class="admin-kpi-label">Snitt str√∏mreduksjon</div>
                    <div class="admin-kpi-change up">‚ñ≤ 6% fra jan</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--honey);">142 380</div>
                    <div class="admin-kpi-label">kr spart totalt</div>
                    <div class="admin-kpi-change up">‚ñ≤ 18 200 denne mnd</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--success);">1.8 tonn</div>
                    <div class="admin-kpi-label">CO‚ÇÇ spart (feb)</div>
                    <div class="admin-kpi-change up">‚ñ≤ 0.3t fra jan</div>
                </div>
            </div>

            <!-- === Studentboliger summary === -->
            <div style="margin-top:16px; padding:16px; background:rgba(255,195,0,0.04); border-radius:14px; border: 1px solid rgba(255,195,0,0.12);">
                <div style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
                    <span style="font-size:1.1rem;">üèòÔ∏è</span>
                    <div style="font-weight:800; font-size:0.9rem;">Studentboliger</div>
                    <span style="font-size:0.62rem; background:var(--honey); color:#000; padding:2px 8px; border-radius:6px; font-weight:800; margin-left:auto;">847 enheter ¬∑ 4 bygg</span>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px;">
                    <div style="background:rgba(255,255,255,0.025); border-radius:10px; padding:10px; text-align:center; border: 1px solid rgba(255,255,255,0.04);">
                        <div style="font-size:0.62rem; color:var(--text-dim); font-weight:600;">Snitt forbruk</div>
                        <div style="font-weight:900; font-size:1rem; color:var(--success);">-34%</div>
                    </div>
                    <div style="background:rgba(255,255,255,0.025); border-radius:10px; padding:10px; text-align:center; border: 1px solid rgba(255,255,255,0.04);">
                        <div style="font-size:0.62rem; color:var(--text-dim); font-weight:600;">Sparemodus-bruk</div>
                        <div style="font-weight:900; font-size:1rem; color:var(--honey);">89%</div>
                    </div>
                    <div style="background:rgba(255,255,255,0.025); border-radius:10px; padding:10px; text-align:center; border: 1px solid rgba(255,255,255,0.04);">
                        <div style="font-size:0.62rem; color:var(--text-dim); font-weight:600;">Aktive KPIer</div>
                        <div style="font-weight:900; font-size:1rem; color:var(--admin-accent);">78%</div>
                    </div>
                </div>
                <div style="display:grid; gap:4px; margin-top:8px;">
                    <div style="display:flex; justify-content:space-between; font-size:0.75rem; padding:5px 8px; background:rgba(0,0,0,0.15); border-radius:6px;">
                        <span>üè¢ Stavanger Studentheim (214)</span>
                        <span style="color:var(--success); font-weight:700;">Effektiv ‚úì</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.75rem; padding:5px 8px; background:rgba(0,0,0,0.15); border-radius:6px;">
                        <span>üèòÔ∏è Ullandhaug Studentby (386)</span>
                        <span style="color:var(--warning); font-weight:700;">Avvik ‚ö†Ô∏è</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.75rem; padding:5px 8px; background:rgba(0,0,0,0.15); border-radius:6px;">
                        <span>üè† Bjergsted Studenthus (128)</span>
                        <span style="color:var(--success); font-weight:700;">Effektiv ‚úì</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.75rem; padding:5px 8px; background:rgba(0,0,0,0.15); border-radius:6px;">
                        <span>üè° Hundv√•g Studentboliger (119)</span>
                        <span style="color:var(--success); font-weight:700;">Effektiv ‚úì</span>
                    </div>
                </div>
            </div>

            <!-- === Campus / Universitetsbygg summary === -->
            <div style="margin-top:12px; padding:16px; background:rgba(6,182,212,0.04); border-radius:14px; border: 1px solid rgba(6,182,212,0.12);">
                <div style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
                    <span style="font-size:1.1rem;">üéì</span>
                    <div style="font-weight:800; font-size:0.9rem;">Campus / Universitetsbygg</div>
                    <span style="font-size:0.62rem; background:var(--admin-accent); color:#fff; padding:2px 8px; border-radius:6px; font-weight:800; margin-left:auto;">5 bygg ¬∑ UiS</span>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px;">
                    <div style="background:rgba(255,255,255,0.025); border-radius:10px; padding:10px; text-align:center; border: 1px solid rgba(255,255,255,0.04);">
                        <div style="font-size:0.62rem; color:var(--text-dim); font-weight:600;">Rom med sl√∏sing</div>
                        <div style="font-weight:900; font-size:1rem; color:var(--danger);">1</div>
                    </div>
                    <div style="background:rgba(255,255,255,0.025); border-radius:10px; padding:10px; text-align:center; border: 1px solid rgba(255,255,255,0.04);">
                        <div style="font-size:0.62rem; color:var(--text-dim); font-weight:600;">Auto-handlinger i dag</div>
                        <div style="font-weight:900; font-size:1rem; color:var(--admin-accent);">5</div>
                    </div>
                    <div style="background:rgba(255,255,255,0.025); border-radius:10px; padding:10px; text-align:center; border: 1px solid rgba(255,255,255,0.04);">
                        <div style="font-size:0.62rem; color:var(--text-dim); font-weight:600;">Spart i dag</div>
                        <div style="font-weight:900; font-size:1rem; color:var(--success);">2 340 kr</div>
                    </div>
                </div>
                <div style="display:grid; gap:4px; margin-top:8px;">
                    <div style="display:flex; justify-content:space-between; font-size:0.75rem; padding:5px 8px; background:rgba(0,0,0,0.15); border-radius:6px;">
                        <span>üìö Aud. A ‚Äî I bruk (34 pers.)</span>
                        <span style="color:var(--success); font-weight:700;">OK ‚úì</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.75rem; padding:5px 8px; background:rgba(0,0,0,0.15); border-radius:6px;">
                        <span>‚ö†Ô∏è Aud. B ‚Äî TOMT, sl√∏ser 14.50 kr/t</span>
                        <span style="color:var(--danger); font-weight:700;">Sl√∏ser ‚úó</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.75rem; padding:5px 8px; background:rgba(0,0,0,0.15); border-radius:6px;">
                        <span>üî¨ Lab 1 ‚Äî 8 pers.</span>
                        <span style="color:var(--success); font-weight:700;">OK ‚úì</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.75rem; padding:5px 8px; background:rgba(0,0,0,0.15); border-radius:6px;">
                        <span>üçΩÔ∏è Kantine ¬∑ üè¢ Kontor</span>
                        <span style="color:var(--success); font-weight:700;">Eco ‚úì</span>
                    </div>
                </div>
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top:16px;">
                <div>
                    <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:8px;">‚ö° Str√∏mforbruk portef√∏lje (kWh/dag)</div>
                    <div class="admin-chart-bars" id="admin-portfolio-chart"></div>
                    <div class="admin-chart-labels"><span>Man</span><span>Tir</span><span>Ons</span><span>Tor</span><span>Fre</span><span>L√∏r</span><span>S√∏n</span></div>
                </div>
                <div>
                    <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:8px;">üéØ Beboerengasjement</div>
                    <div style="background:rgba(255,255,255,0.025); border-radius:12px; padding:14px; border: 1px solid rgba(255,255,255,0.04);">
                        <div style="display:flex; justify-content:space-between; font-size:0.78rem; margin-bottom:10px;">
                            <span>Aktive brukere (siste 7d):</span>
                            <strong style="color:var(--admin-accent)">78%</strong>
                        </div>
                        <div style="display:flex; justify-content:space-between; font-size:0.78rem; margin-bottom:10px;">
                            <span>AI-forslag implementert:</span>
                            <strong style="color:var(--success)">62%</strong>
                        </div>
                        <div style="display:flex; justify-content:space-between; font-size:0.78rem; margin-bottom:10px;">
                            <span>Gjennomsnitt Honey/beboer:</span>
                            <strong style="color:var(--honey)">520 üçØ</strong>
                        </div>
                        <div style="display:flex; justify-content:space-between; font-size:0.78rem;">
                            <span>Bortreistmodus-bruk:</span>
                            <strong style="color:var(--success)">89%</strong>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Anomaly Summary -->
            <div style="margin-top:16px; padding:14px; background:var(--danger-dim); border-radius:14px; border: 1px solid rgba(255,77,77,0.15);">
                <div style="font-weight:700; font-size:0.85rem; margin-bottom:8px;">üö® Aktive Avvik (3)</div>
                <div style="display:grid; gap:6px;">
                    <div style="display:flex; justify-content:space-between; font-size:0.78rem; padding:6px 10px; background:rgba(0,0,0,0.2); border-radius:8px;">
                        <span>üèòÔ∏è Stavanger Studentheim ‚Äî Blokk C, Ventilasjon</span>
                        <strong style="color:var(--danger)">+23 kWh/d</strong>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.78rem; padding:6px 10px; background:rgba(0,0,0,0.2); border-radius:8px;">
                        <span>üèòÔ∏è Ullandhaug Studentby ‚Äî Bygg 7, Varmtvannsbereder</span>
                        <strong style="color:var(--danger)">+38 kWh/d</strong>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.78rem; padding:6px 10px; background:rgba(0,0,0,0.2); border-radius:8px;">
                        <span>üéì Campus SV ‚Äî Aud. B, Lys/ventilasjon</span>
                        <strong style="color:var(--danger)">+14.50 kr/t</strong>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== ADMIN TAB 2A ‚Äî STUDENTBOLIGER ========== -->
    <section id="tab-admin-student" class="tab-content">
        <div class="card">
            <h3>üèòÔ∏è Studentboliger ‚Äî Portef√∏lje</h3>
            <p class="card-sub">Alle studentboliger under SiS Bolig ‚Äî energistatus og drift</p>

            <div class="admin-kpi-grid">
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--admin-accent);">847</div>
                    <div class="admin-kpi-label">Totalt enheter</div>
                    <div class="admin-kpi-change up">4 boligkompleks</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--success);">-34%</div>
                    <div class="admin-kpi-label">Snitt reduksjon</div>
                    <div class="admin-kpi-change up">‚ñ≤ 6% fra jan</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--honey);">204</div>
                    <div class="admin-kpi-label">Sensorer online</div>
                    <div class="admin-kpi-change up">99.5% oppetid</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--success);">89%</div>
                    <div class="admin-kpi-label">Sparemodus-bruk</div>
                    <div class="admin-kpi-change up">‚ñ≤ 12%</div>
                </div>
            </div>

            <div class="building-list">
                <div class="building-item" onclick="showToast('üìç √Öpner detaljvisning for Stavanger Studentheim...', '')">
                    <div class="building-icon" style="background:var(--success-dim);">üè¢</div>
                    <div class="building-body">
                        <div class="building-name">Stavanger Studentheim</div>
                        <div class="building-meta">214 enheter ¬∑ 12 etasjer ¬∑ 48 sensorer online</div>
                    </div>
                    <div class="building-status good">Effektiv</div>
                </div>
                <div class="building-item" onclick="showToast('üìç √Öpner detaljvisning for Ullandhaug Studentby...', '')">
                    <div class="building-icon" style="background:var(--warning-dim);">üèòÔ∏è</div>
                    <div class="building-body">
                        <div class="building-name">Ullandhaug Studentby</div>
                        <div class="building-meta">386 enheter ¬∑ 8 bygg ¬∑ 96 sensorer online</div>
                    </div>
                    <div class="building-status warning">Avvik</div>
                </div>
                <div class="building-item" onclick="showToast('üìç √Öpner detaljvisning for Bjergsted Studenthus...', '')">
                    <div class="building-icon" style="background:var(--success-dim);">üè†</div>
                    <div class="building-body">
                        <div class="building-name">Bjergsted Studenthus</div>
                        <div class="building-meta">128 enheter ¬∑ 4 bygg ¬∑ 32 sensorer online</div>
                    </div>
                    <div class="building-status good">Effektiv</div>
                </div>
                <div class="building-item" onclick="showToast('üìç √Öpner detaljvisning for Hundv√•g Studentboliger...', '')">
                    <div class="building-icon" style="background:var(--success-dim);">üè°</div>
                    <div class="building-body">
                        <div class="building-name">Hundv√•g Studentboliger</div>
                        <div class="building-meta">119 enheter ¬∑ 3 bygg ¬∑ 28 sensorer online</div>
                    </div>
                    <div class="building-status good">Effektiv</div>
                </div>
            </div>

            <!-- Energifordeling studentboliger -->
            <div style="margin-top:16px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:8px;">‚ö° Energifordeling ‚Äî Studentboliger totalt</div>
                <div class="energy-flow">
                    <div class="flow-row">
                        <span class="flow-label">üå°Ô∏è Oppvarming</span>
                        <div class="flow-bar-bg">
                            <div class="flow-bar-fill" style="width:52%; background: linear-gradient(90deg, #f59e0b, #fbbf24);">52%</div>
                        </div>
                    </div>
                    <div class="flow-row">
                        <span class="flow-label">üåÄ Ventilasjon</span>
                        <div class="flow-bar-bg">
                            <div class="flow-bar-fill" style="width:21%; background: linear-gradient(90deg, #a78bfa, #c4b5fd);">21%</div>
                        </div>
                    </div>
                    <div class="flow-row">
                        <span class="flow-label">üí° Belysning</span>
                        <div class="flow-bar-bg">
                            <div class="flow-bar-fill" style="width:15%; background: linear-gradient(90deg, #3b82f6, #60a5fa);">15%</div>
                        </div>
                    </div>
                    <div class="flow-row">
                        <span class="flow-label">üîå Utstyr</span>
                        <div class="flow-bar-bg">
                            <div class="flow-bar-fill" style="width:12%; background: linear-gradient(90deg, #64748b, #94a3b8);">12%</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Studentbolig varsler -->
            <div style="margin-top:14px; padding:14px; background:var(--danger-dim); border-radius:14px; border: 1px solid rgba(255,77,77,0.15);">
                <div style="font-weight:700; font-size:0.85rem; margin-bottom:8px;">üö® Aktive Avvik ‚Äî Studentboliger</div>
                <div style="display:grid; gap:6px;">
                    <div style="display:flex; justify-content:space-between; font-size:0.78rem; padding:6px 10px; background:rgba(0,0,0,0.2); border-radius:8px;">
                        <span>‚ö†Ô∏è Stavanger Studentheim ‚Äî Blokk C, Ventilasjon</span>
                        <strong style="color:var(--danger)">+23 kWh/d</strong>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.78rem; padding:6px 10px; background:rgba(0,0,0,0.2); border-radius:8px;">
                        <span>‚ö†Ô∏è Ullandhaug ‚Äî Bygg 7, Varmtvannsbereder</span>
                        <strong style="color:var(--danger)">+38 kWh/d</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üìä Beboerengasjement ‚Äî Studentboliger</h3>
            <p class="card-sub">Aggregert aktivitet og bruk av Bee Efficient i boligportef√∏ljen</p>

            <div style="background:rgba(255,255,255,0.025); border-radius:12px; padding:14px; border: 1px solid rgba(255,255,255,0.04); margin-top:8px;">
                <div style="display:flex; justify-content:space-between; font-size:0.78rem; margin-bottom:10px;">
                    <span>Aktive brukere (siste 7d):</span>
                    <strong style="color:var(--admin-accent)">78%</strong>
                </div>
                <div style="display:flex; justify-content:space-between; font-size:0.78rem; margin-bottom:10px;">
                    <span>AI-forslag implementert:</span>
                    <strong style="color:var(--success)">62%</strong>
                </div>
                <div style="display:flex; justify-content:space-between; font-size:0.78rem; margin-bottom:10px;">
                    <span>Gjennomsnitt Honey/beboer:</span>
                    <strong style="color:var(--honey)">520 üçØ</strong>
                </div>
                <div style="display:flex; justify-content:space-between; font-size:0.78rem;">
                    <span>Bortreistmodus-bruk:</span>
                    <strong style="color:var(--success)">89%</strong>
                </div>
            </div>

            <!-- Kommunikasjon -->
            <div style="margin-top:14px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:8px;">üì¢ Siste kampanjer</div>
                <div class="auto-action-item">
                    <div class="auto-icon">üéØ</div>
                    <div class="auto-body">
                        <div class="auto-title">"Vinterchallenge ‚Äî Spar 20% i feb"</div>
                        <div class="auto-desc">Sendt 1. feb ¬∑ √Öpnet: 72% ¬∑ Deltakende kuber: 412</div>
                    </div>
                    <div class="auto-saved" style="color:var(--admin-accent); background:var(--admin-accent-dim);">Aktiv</div>
                </div>
                <div class="auto-action-item">
                    <div class="auto-icon">üåô</div>
                    <div class="auto-body">
                        <div class="auto-title">"Nattsenking = Gratis kaffe"</div>
                        <div class="auto-desc">Sendt 20. jan ¬∑ √Öpnet: 84% ¬∑ Kuber med nattmodus: 68%</div>
                    </div>
                    <div class="auto-saved" style="color:var(--success); background:var(--success-dim);">Fullf√∏rt</div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== ADMIN TAB 2B ‚Äî CAMPUS / UNIVERSITETSBYGG ========== -->
    <section id="tab-admin-campus" class="tab-content">
        <div class="card">
            <h3>üéì Campus ‚Äî UiS Universitetsbygg</h3>
            <p class="card-sub">Energistyring synkronisert med EduCloud Timeplan ‚Äî rom varmes kun n√•r de er booket</p>

            <!-- EduCloud Integration Banner -->
            <div style="background:linear-gradient(135deg, rgba(6,182,212,0.08), rgba(59,130,246,0.04)); border:1px solid rgba(6,182,212,0.2); border-radius:14px; padding:14px 16px; margin-bottom:16px; display:flex; align-items:center; gap:12px;">
                <div style="width:42px; height:42px; border-radius:12px; background:var(--admin-accent-dim); display:flex; align-items:center; justify-content:center; font-size:1.3rem; flex-shrink:0;">üìÖ</div>
                <div style="flex:1;">
                    <div style="font-weight:800; font-size:0.82rem; display:flex; align-items:center; gap:6px;">
                        EduCloud Timeplan ‚Äî Synkronisert
                        <span style="font-size:0.58rem; background:var(--success); color:#fff; padding:2px 7px; border-radius:5px; font-weight:800;">LIVE</span>
                    </div>
                    <div style="font-size:0.68rem; color:var(--text-dim); margin-top:2px;">Bee Efficient leser timeplanen og forbereder rom automatisk 30 min f√∏r forelesning. N√•r et rom ikke er booket ‚Üí eco-modus.</div>
                </div>
            </div>

            <div class="admin-kpi-grid">
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--admin-accent);">12</div>
                    <div class="admin-kpi-label">Bookinger i dag</div>
                    <div class="admin-kpi-change up">via EduCloud</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--danger);">1</div>
                    <div class="admin-kpi-label">Rom sl√∏ser</div>
                    <div class="admin-kpi-change down">Ingen booking</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--success);">6</div>
                    <div class="admin-kpi-label">Auto-handlinger</div>
                    <div class="admin-kpi-change up">Timeplan-drevet</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--honey);">3 480 kr</div>
                    <div class="admin-kpi-label">Spart i dag</div>
                    <div class="admin-kpi-change up">‚ñ≤ 420 kr fra ig√•r</div>
                </div>
            </div>

            <!-- Today's Schedule from EduCloud -->
            <div style="margin-top:4px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:8px; display:flex; align-items:center; gap:6px;">
                    üìÖ Timeplan i dag ‚Äî Fredag 14. feb 2026
                    <span style="font-size:0.58rem; background:rgba(6,182,212,0.15); color:var(--admin-accent); padding:2px 7px; border-radius:5px; font-weight:700;">EduCloud</span>
                </div>

                <!-- Schedule timeline -->
                <div style="display:grid; gap:6px;">
                    <!-- Completed lecture -->
                    <div style="display:flex; align-items:center; gap:10px; padding:10px 14px; background:rgba(0,209,102,0.04); border-radius:12px; border:1px solid rgba(0,209,102,0.1); opacity:0.7;">
                        <div style="min-width:52px; text-align:center;">
                            <div style="font-size:0.68rem; font-weight:800; color:var(--success);">08:15</div>
                            <div style="font-size:0.55rem; color:var(--text-dim);">10:00</div>
                        </div>
                        <div style="width:3px; height:36px; border-radius:2px; background:var(--success); flex-shrink:0;"></div>
                        <div style="flex:1;">
                            <div style="font-weight:700; font-size:0.78rem;">DAT120 ‚Äî Intro til programmering</div>
                            <div style="font-size:0.65rem; color:var(--text-dim);">Aud. A ¬∑ SV-bygget ¬∑ 34 studenter</div>
                        </div>
                        <div style="text-align:right;">
                            <div style="font-size:0.62rem; font-weight:700; color:var(--success);">‚úì Fullf√∏rt</div>
                            <div style="font-size:0.55rem; color:var(--text-dim);">Varme kl 07:45</div>
                        </div>
                    </div>

                    <!-- Active lecture -->
                    <div style="display:flex; align-items:center; gap:10px; padding:10px 14px; background:rgba(6,182,212,0.06); border-radius:12px; border:1px solid rgba(6,182,212,0.2); box-shadow:0 0 12px rgba(6,182,212,0.08);">
                        <div style="min-width:52px; text-align:center;">
                            <div style="font-size:0.68rem; font-weight:800; color:var(--admin-accent);">10:15</div>
                            <div style="font-size:0.55rem; color:var(--text-dim);">12:00</div>
                        </div>
                        <div style="width:3px; height:36px; border-radius:2px; background:var(--admin-accent); flex-shrink:0; box-shadow:0 0 6px rgba(6,182,212,0.4);"></div>
                        <div style="flex:1;">
                            <div style="font-weight:700; font-size:0.78rem; display:flex; align-items:center; gap:5px;">BYG210 ‚Äî Termodynamikk <span style="font-size:0.55rem; background:var(--admin-accent); color:#fff; padding:1px 6px; border-radius:4px; font-weight:700;">N√Ö</span></div>
                            <div style="font-size:0.65rem; color:var(--text-dim);">Lab 1 ¬∑ TN-bygget ¬∑ 8 studenter</div>
                        </div>
                        <div style="text-align:right;">
                            <div style="font-size:0.62rem; font-weight:700; color:var(--admin-accent);">Aktiv</div>
                            <div style="font-size:0.55rem; color:var(--text-dim);">20.8¬∞ ¬∑ 0.9 kW</div>
                        </div>
                    </div>

                    <!-- NO booking ‚Äî wasting -->
                    <div style="display:flex; align-items:center; gap:10px; padding:10px 14px; background:var(--danger-dim); border-radius:12px; border:1px solid rgba(255,77,77,0.2); animation: pulseRed 2s infinite;">
                        <div style="min-width:52px; text-align:center;">
                            <div style="font-size:0.68rem; font-weight:800; color:var(--danger);">‚Äî</div>
                            <div style="font-size:0.55rem; color:var(--text-dim);">Ingen</div>
                        </div>
                        <div style="width:3px; height:36px; border-radius:2px; background:var(--danger); flex-shrink:0;"></div>
                        <div style="flex:1;">
                            <div style="font-weight:700; font-size:0.78rem; color:var(--danger);">‚ö†Ô∏è Auditorium B ‚Äî IKKE BOOKET</div>
                            <div style="font-size:0.65rem; color:var(--text-dim);">SV-bygget ¬∑ Ingen forelesning i EduCloud ¬∑ Lys/ventilasjon P√Ö</div>
                        </div>
                        <div style="text-align:right;">
                            <div style="font-size:0.62rem; font-weight:800; color:var(--danger);">14.50 kr/t</div>
                            <div style="font-size:0.55rem; color:var(--text-dim);">Sl√∏ser 2t 14min</div>
                        </div>
                    </div>

                    <!-- Upcoming lecture -->
                    <div style="display:flex; align-items:center; gap:10px; padding:10px 14px; background:rgba(255,255,255,0.02); border-radius:12px; border:1px solid rgba(255,255,255,0.05);">
                        <div style="min-width:52px; text-align:center;">
                            <div style="font-size:0.68rem; font-weight:800; color:var(--text-dim);">12:15</div>
                            <div style="font-size:0.55rem; color:var(--text-dim);">14:00</div>
                        </div>
                        <div style="width:3px; height:36px; border-radius:2px; background:rgba(255,255,255,0.1); flex-shrink:0;"></div>
                        <div style="flex:1;">
                            <div style="font-weight:700; font-size:0.78rem;">IND200 ‚Äî Prosjektledelse</div>
                            <div style="font-size:0.65rem; color:var(--text-dim);">Aud. A ¬∑ SV-bygget ¬∑ ~45 studenter</div>
                        </div>
                        <div style="text-align:right;">
                            <div style="font-size:0.62rem; font-weight:700; color:var(--honey);">Forberedes</div>
                            <div style="font-size:0.55rem; color:var(--text-dim);">Varme kl 11:45</div>
                        </div>
                    </div>

                    <!-- Upcoming lecture 2 -->
                    <div style="display:flex; align-items:center; gap:10px; padding:10px 14px; background:rgba(255,255,255,0.02); border-radius:12px; border:1px solid rgba(255,255,255,0.05);">
                        <div style="min-width:52px; text-align:center;">
                            <div style="font-size:0.68rem; font-weight:800; color:var(--text-dim);">14:15</div>
                            <div style="font-size:0.55rem; color:var(--text-dim);">16:00</div>
                        </div>
                        <div style="width:3px; height:36px; border-radius:2px; background:rgba(255,255,255,0.1); flex-shrink:0;"></div>
                        <div style="flex:1;">
                            <div style="font-weight:700; font-size:0.78rem;">ELE320 ‚Äî Signalbehandling</div>
                            <div style="font-size:0.65rem; color:var(--text-dim);">Lab 1 ¬∑ TN-bygget ¬∑ ~22 studenter</div>
                        </div>
                        <div style="text-align:right;">
                            <div style="font-size:0.62rem; font-weight:700; color:var(--text-dim);">Venter</div>
                            <div style="font-size:0.55rem; color:var(--text-dim);">Varme kl 13:45</div>
                        </div>
                    </div>

                    <!-- Evening ‚Äî no bookings -->
                    <div style="display:flex; align-items:center; gap:10px; padding:10px 14px; background:rgba(0,209,102,0.03); border-radius:12px; border:1px dashed rgba(0,209,102,0.15);">
                        <div style="min-width:52px; text-align:center;">
                            <div style="font-size:0.68rem; font-weight:800; color:var(--success);">16:00</div>
                            <div style="font-size:0.55rem; color:var(--text-dim);">‚Üí Natt</div>
                        </div>
                        <div style="width:3px; height:36px; border-radius:2px; background:var(--success); flex-shrink:0; opacity:0.4;"></div>
                        <div style="flex:1;">
                            <div style="font-weight:700; font-size:0.78rem; color:var(--success);">üåô Ingen flere bookinger ‚Äî Eco-modus</div>
                            <div style="font-size:0.65rem; color:var(--text-dim);">Alle rom settes til minimum fra kl 16:30. Estimert sparing: 890 kr</div>
                        </div>
                        <div style="text-align:right;">
                            <div style="font-size:0.62rem; font-weight:700; color:var(--success);">Auto</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Blueprint with booking status -->
            <div style="margin-top:16px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:8px;">üèóÔ∏è Romkart ‚Äî Live status vs. EduCloud booking</div>
            </div>
            <div class="blueprint">
                <div class="room good" style="grid-area: r1">
                    Auditorium A<br><small>üìÖ DAT120 ‚Äî 34 pers.</small>
                    <span class="room-temp">21.2¬∞</span>
                    <span class="room-pwr">1.8 kW</span>
                </div>
                <div class="room good" style="grid-area: r2">
                    Lab 1<br><small>üìÖ BYG210 ‚Äî 8 pers.</small>
                    <span class="room-temp">20.8¬∞</span>
                    <span class="room-pwr">0.9 kW</span>
                </div>
                <div class="room bad" id="aud-b" style="grid-area: r3" onclick="fixAud(event)">
                    Auditorium B<br><strong style="font-size:0.7rem">‚ùå Ingen booking ‚Äî SL√òSER</strong>
                    <span class="room-temp">23.1¬∞</span>
                    <span class="room-pwr">2.4 kW</span>
                </div>
                <div class="room good" style="grid-area: r4">
                    Kantine<br><small>üìÖ Ingen ‚Äî Eco-modus</small>
                    <span class="room-temp">20.5¬∞</span>
                    <span class="room-pwr">0.6 kW</span>
                </div>
                <div class="room good" style="grid-area: r5">
                    Kontor<br><small>Ansatte ‚Äî 3 pers.</small>
                    <span class="room-temp">21.0¬∞</span>
                    <span class="room-pwr">0.4 kW</span>
                </div>
            </div>

            <!-- Alert tied to booking -->
            <div id="alert-box" style="background: var(--danger-dim); padding: 16px; border-radius: 14px; border: 1px solid rgba(255,77,77,0.2); margin-top: 14px;">
                <div style="font-weight:700; font-size:0.85rem; margin-bottom:8px;">üö® Sl√∏sing Detektert ‚Äî Auditorium B</div>
                <div style="font-size:0.78rem; color:var(--text-dim); margin-bottom: 10px;">
                    üìÖ <b style="color:var(--text)">EduCloud: Ingen booking</b> resten av dagen<br>
                    üë§ Bevegelsessensor: <b style="color:var(--text)">0 personer</b> i 2t 14min<br>
                    üí° Lys: <b style="color:var(--danger)">100%</b> ¬∑ üåÄ Ventilasjon: <b style="color:var(--danger)">Full</b> ¬∑ üå°Ô∏è Temp: <b style="color:var(--danger)">23.1¬∞</b>
                </div>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 10px; font-size: 0.82rem;">
                    <span>üí∏ Un√∏dvendig tap:</span>
                    <strong style="color:var(--danger); font-size: 1rem;">14.50 kr/t</strong>
                </div>
                <div style="display:flex; gap:8px;">
                    <button class="buy-btn" style="flex:1; padding:12px; font-size:0.85rem;" onclick="fixAud(event)">‚ö° OPTIMALISER N√Ö</button>
                    <button class="buy-btn" style="flex:1; padding:12px; font-size:0.85rem; background:linear-gradient(135deg, var(--admin-accent), #0891b2); color:#fff;" onclick="showToast('üìÖ Regelen lagret: Aud. B ‚Üí auto eco-modus n√•r ingen booking i EduCloud', 'success')">üìÖ AUTO-REGEL</button>
                </div>
            </div>
            <div id="fix-msg" style="display:none; text-align:center; color:var(--success); margin-top:14px; padding: 18px; background: var(--success-dim); border-radius: 14px; border: 1px solid rgba(0,209,102,0.15);">
                <div style="font-size:1.8rem; margin-bottom:6px;">‚úÖ</div>
                <b>Bygget er n√• 100% effektivt!</b><br>
                <small style="color:var(--text-dim)">Lys ‚Üí 10% ¬∑ Ventilasjon ‚Üí Minimum ¬∑ Temp ‚Üí 19¬∞</small>
            </div>
        </div>

        <div class="card">
            <h3>üìä Timeplan vs. Energibruk ‚Äî Analyse</h3>
            <p class="card-sub">Hvor mye energi brukes utenfor booket tid? Data fra EduCloud + sensorer.</p>

            <!-- Booking efficiency stats -->
            <div class="admin-kpi-grid">
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--success);">78%</div>
                    <div class="admin-kpi-label">Booking-effektivitet</div>
                    <div class="admin-kpi-change up">Energi kun ved booking</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--danger);">22%</div>
                    <div class="admin-kpi-label">Sl√∏sing uten booking</div>
                    <div class="admin-kpi-change down">‚Üì 8% fra jan</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--honey);">4.2t</div>
                    <div class="admin-kpi-label">Snitt prep-tid spart</div>
                    <div class="admin-kpi-change up">Per rom per dag</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--success);">41 200</div>
                    <div class="admin-kpi-label">kr spart (feb)</div>
                    <div class="admin-kpi-change up">Timeplan-integrasjon</div>
                </div>
            </div>

            <!-- How it works -->
            <div style="margin-top:8px; padding:14px; background:rgba(6,182,212,0.04); border-radius:14px; border:1px solid rgba(6,182,212,0.1);">
                <div style="font-weight:700; font-size:0.82rem; margin-bottom:10px;">‚öôÔ∏è Slik fungerer EduCloud-integrasjonen</div>
                <div style="display:grid; gap:8px;">
                    <div style="display:flex; align-items:center; gap:10px; font-size:0.75rem;">
                        <div style="width:28px; height:28px; border-radius:8px; background:var(--admin-accent-dim); display:flex; align-items:center; justify-content:center; font-weight:900; color:var(--admin-accent); font-size:0.7rem; flex-shrink:0;">1</div>
                        <div><b>Henter timeplan</b> ‚Äî API-kall til EduCloud hver natt kl 02:00 + live-oppdateringer ved endringer</div>
                    </div>
                    <div style="display:flex; align-items:center; gap:10px; font-size:0.75rem;">
                        <div style="width:28px; height:28px; border-radius:8px; background:var(--admin-accent-dim); display:flex; align-items:center; justify-content:center; font-weight:900; color:var(--admin-accent); font-size:0.7rem; flex-shrink:0;">2</div>
                        <div><b>Pre-heating 30 min</b> ‚Äî Rommet varmes til m√•ltemp basert p√• antall p√•meldte studenter</div>
                    </div>
                    <div style="display:flex; align-items:center; gap:10px; font-size:0.75rem;">
                        <div style="width:28px; height:28px; border-radius:8px; background:var(--admin-accent-dim); display:flex; align-items:center; justify-content:center; font-weight:900; color:var(--admin-accent); font-size:0.7rem; flex-shrink:0;">3</div>
                        <div><b>Live-verifisering</b> ‚Äî Bevegelsessensor bekrefter om folk faktisk er der. Avvik ‚Üí alarm</div>
                    </div>
                    <div style="display:flex; align-items:center; gap:10px; font-size:0.75rem;">
                        <div style="width:28px; height:28px; border-radius:8px; background:var(--admin-accent-dim); display:flex; align-items:center; justify-content:center; font-weight:900; color:var(--admin-accent); font-size:0.7rem; flex-shrink:0;">4</div>
                        <div><b>Cool-down 15 min etter</b> ‚Äî Rommet senkes til eco-modus 15 min etter forelesning er slutt</div>
                    </div>
                </div>
            </div>

            <!-- Energy waste by time-of-day -->
            <div style="margin-top:14px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:8px;">‚ö° Energibruk ‚Äî Booket vs. Ikke-booket tid (denne uka)</div>
                <div style="display:grid; grid-template-columns: repeat(5, 1fr); gap:4px;">
                    <div style="text-align:center; font-size:0.55rem; font-weight:700; color:var(--text-dim);">Man</div>
                    <div style="text-align:center; font-size:0.55rem; font-weight:700; color:var(--text-dim);">Tir</div>
                    <div style="text-align:center; font-size:0.55rem; font-weight:700; color:var(--text-dim);">Ons</div>
                    <div style="text-align:center; font-size:0.55rem; font-weight:700; color:var(--text-dim);">Tor</div>
                    <div style="text-align:center; font-size:0.55rem; font-weight:700; color:var(--admin-accent);">Fre</div>
                </div>
                <div style="display:grid; grid-template-columns: repeat(5, 1fr); gap:4px; margin-top:4px;">
                    <div style="border-radius:8px; overflow:hidden;">
                        <div style="background:var(--success); height:40px; display:flex; align-items:center; justify-content:center; font-size:0.55rem; font-weight:800; color:#000;">82%</div>
                        <div style="background:var(--danger); height:12px; display:flex; align-items:center; justify-content:center; font-size:0.5rem; font-weight:700; color:#fff;">18%</div>
                    </div>
                    <div style="border-radius:8px; overflow:hidden;">
                        <div style="background:var(--success); height:36px; display:flex; align-items:center; justify-content:center; font-size:0.55rem; font-weight:800; color:#000;">76%</div>
                        <div style="background:var(--danger); height:16px; display:flex; align-items:center; justify-content:center; font-size:0.5rem; font-weight:700; color:#fff;">24%</div>
                    </div>
                    <div style="border-radius:8px; overflow:hidden;">
                        <div style="background:var(--success); height:44px; display:flex; align-items:center; justify-content:center; font-size:0.55rem; font-weight:800; color:#000;">88%</div>
                        <div style="background:var(--danger); height:8px;"></div>
                    </div>
                    <div style="border-radius:8px; overflow:hidden;">
                        <div style="background:var(--success); height:38px; display:flex; align-items:center; justify-content:center; font-size:0.55rem; font-weight:800; color:#000;">80%</div>
                        <div style="background:var(--danger); height:14px; display:flex; align-items:center; justify-content:center; font-size:0.5rem; font-weight:700; color:#fff;">20%</div>
                    </div>
                    <div style="border-radius:8px; overflow:hidden; border:1px solid rgba(6,182,212,0.3);">
                        <div style="background:var(--admin-accent); height:34px; display:flex; align-items:center; justify-content:center; font-size:0.55rem; font-weight:800; color:#fff;">?</div>
                        <div style="background:rgba(255,77,77,0.3); height:10px;"></div>
                    </div>
                </div>
                <div style="display:flex; gap:12px; margin-top:6px; font-size:0.6rem; color:var(--text-dim); font-weight:600;">
                    <span><span style="display:inline-block; width:8px; height:8px; border-radius:2px; background:var(--success); margin-right:3px; vertical-align:middle;"></span>Booket tid</span>
                    <span><span style="display:inline-block; width:8px; height:8px; border-radius:2px; background:var(--danger); margin-right:3px; vertical-align:middle;"></span>Sl√∏sing uten booking</span>
                </div>
            </div>

            <!-- Campusbygg -->
            <div style="margin-top:16px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:8px;">üèõÔ∏è Campusbygg ‚Äî Neste forelesninger fra EduCloud</div>
                <div class="building-list">
                    <div class="building-item">
                        <div class="building-icon" style="background:var(--accent-dim);">üìö</div>
                        <div class="building-body">
                            <div class="building-name">Sosialvitenskap (SV)</div>
                            <div class="building-meta">üìÖ Neste: IND200 kl 12:15 ¬∑ Aud. A</div>
                        </div>
                        <div class="building-status bad" style="background:var(--danger-dim); color:var(--danger);">1 avvik</div>
                    </div>
                    <div class="building-item">
                        <div class="building-icon" style="background:var(--success-dim);">üî¨</div>
                        <div class="building-body">
                            <div class="building-name">Teknisk-Naturvitenskapelig (TN)</div>
                            <div class="building-meta">üìÖ Aktiv: BYG210 ¬∑ Neste: ELE320 kl 14:15</div>
                        </div>
                        <div class="building-status good">Effektiv</div>
                    </div>
                    <div class="building-item">
                        <div class="building-icon" style="background:var(--success-dim);">üè•</div>
                        <div class="building-body">
                            <div class="building-name">Helsefag (HF)</div>
                            <div class="building-meta">üìÖ Ingen bookinger i dag ‚Äî Full eco-modus</div>
                        </div>
                        <div class="building-status good">Eco ‚ôªÔ∏è</div>
                    </div>
                    <div class="building-item">
                        <div class="building-icon" style="background:var(--success-dim);">üìñ</div>
                        <div class="building-body">
                            <div class="building-name">Bibliotek & L√¶ringssenteret</div>
                            <div class="building-meta">üìÖ √Öpent 08‚Äì18 ¬∑ Behovsbasert ventilasjon</div>
                        </div>
                        <div class="building-status good">Effektiv</div>
                    </div>
                    <div class="building-item">
                        <div class="building-icon" style="background:var(--success-dim);">üçΩÔ∏è</div>
                        <div class="building-body">
                            <div class="building-name">Kantine & Fellesarealer</div>
                            <div class="building-meta">üìÖ Lunsj 11‚Äì13 ¬∑ Eco etter 14:00</div>
                        </div>
                        <div class="building-status good">Eco-modus</div>
                    </div>
                </div>
            </div>

            <!-- IoT Timeline tied to bookings -->
            <div class="iot-timeline">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-top:12px; margin-bottom:2px;">‚è± Automatiske Handlinger ‚Äî Drevet av EduCloud Timeplan</div>
                <div class="iot-event auto">
                    <span class="iot-time">07:45</span>
                    <span>üìÖ Aud. A ‚Äî Pre-heating til 21¬∞ (DAT120 kl 08:15, 34 p√•meldte)</span>
                </div>
                <div class="iot-event success">
                    <span class="iot-time">09:50</span>
                    <span>üìÖ Lab 1 ‚Äî Varme √∏kt (BYG210 kl 10:15, 8 p√•meldte)</span>
                </div>
                <div class="iot-event alert">
                    <span class="iot-time">10:15</span>
                    <span>‚ö†Ô∏è Aud. B ‚Äî Ingen booking i EduCloud + 0 personer = Sl√∏sing detektert</span>
                </div>
                <div class="iot-event success">
                    <span class="iot-time">10:30</span>
                    <span>‚úÖ Aud. A ‚Äî Cool-down startet (DAT120 ferdig, neste kl 12:15)</span>
                </div>
                <div class="iot-event auto">
                    <span class="iot-time">11:45</span>
                    <span>üìÖ Aud. A ‚Äî Pre-heating igjen (IND200 kl 12:15, ~45 p√•meldte)</span>
                </div>
                <div class="iot-event auto">
                    <span class="iot-time">13:45</span>
                    <span>üìÖ Lab 1 ‚Äî Pre-heating (ELE320 kl 14:15, ~22 p√•meldte)</span>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== ADMIN TAB 3 ‚Äî √òKONOMI ========== -->
    <section id="tab-admin-okonomi" class="tab-content">
        <div class="card">
            <h3>üí∞ √òkonomirapport ‚Äî Februar 2026</h3>
            <p class="card-sub">Str√∏mkostnader og besparelser for hele portef√∏ljen</p>

            <div class="admin-kpi-grid" style="grid-template-columns: repeat(3, 1fr);">
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--text);">287 400</div>
                    <div class="admin-kpi-label">kr forventet uten Bee</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--honey);">189 720</div>
                    <div class="admin-kpi-label">kr faktisk kostnad</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--success);">97 680</div>
                    <div class="admin-kpi-label">kr spart denne mnd</div>
                    <div class="admin-kpi-change up">‚ñ≤ 34% reduksjon</div>
                </div>
            </div>

            <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-top:16px; margin-bottom:8px;">üìä M√•nedlig besparelse (kr)</div>
            <div class="admin-chart-bars" id="admin-savings-chart"></div>
            <div class="admin-chart-labels"><span>Sep</span><span>Okt</span><span>Nov</span><span>Des</span><span>Jan</span><span>Feb</span></div>

            <div class="insight-card" style="margin-top:16px;">
                <div class="insight-title">üìã Kostnadsfordeling per bygg</div>
                <ul class="insight-bullets">
                    <li>üè¢ <span class="il">Stavanger Studentheim</span> ‚Äî 52 340 kr (besparelse: 28 120 kr)</li>
                    <li>üèòÔ∏è <span class="il">Ullandhaug Studentby</span> ‚Äî 84 200 kr (besparelse: 41 800 kr)</li>
                    <li>üè† <span class="il">Bjergsted Studenthus</span> ‚Äî 31 480 kr (besparelse: 16 260 kr)</li>
                    <li>üè° <span class="il">Hundv√•g Studentboliger</span> ‚Äî 21 700 kr (besparelse: 11 500 kr)</li>
                </ul>
            </div>

            <div style="margin-top:14px; padding:14px; background:var(--success-dim); border-radius:14px; border: 1px solid rgba(0,209,102,0.15);">
                <div style="font-weight:700; font-size:0.85rem; margin-bottom:4px;">üí° ROI-beregning</div>
                <div style="font-size:0.75rem; color:var(--text-dim); line-height:1.6;">
                    Totalt investert i Bee Efficient: <b style="color:var(--text)">380 000 kr</b><br>
                    Totalt spart siden oppstart (sep 2025): <b style="color:var(--success)">142 380 kr</b><br>
                    Estimert tilbakebetalingstid: <b style="color:var(--honey)">~16 m√•neder</b><br>
                    √Örlig besparelse (estimert): <b style="color:var(--success)">~580 000 kr</b>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üìà Spotpris-optimalisering</h3>
            <p class="card-sub">BeeAI skifter forbruk til billigere timer automatisk</p>

            <div style="background:rgba(255,255,255,0.025); border-radius:12px; padding:14px; border: 1px solid rgba(255,255,255,0.04); margin-top:8px;">
                <div style="display:flex; justify-content:space-between; font-size:0.78rem; margin-bottom:10px;">
                    <span>Forbruk utenfor peak (22‚Äì06):</span>
                    <strong style="color:var(--success)">+23% vs. forrige mnd</strong>
                </div>
                <div style="display:flex; justify-content:space-between; font-size:0.78rem; margin-bottom:10px;">
                    <span>Gjennomsnittlig spotpris-besparelse:</span>
                    <strong style="color:var(--honey)">0.18 kr/kWh</strong>
                </div>
                <div style="display:flex; justify-content:space-between; font-size:0.78rem;">
                    <span>Varmeforbruk forskj√∏vet til natt:</span>
                    <strong style="color:var(--success)">42%</strong>
                </div>
            </div>

            <div style="margin-top:14px; padding:14px; background:rgba(255,195,0,0.04); border-radius:14px; border: 1px solid rgba(255,195,0,0.1);">
                <div style="font-weight:700; font-size:0.85rem; margin-bottom:6px;">üîÆ Prediksjon ‚Äî Mars 2026</div>
                <div style="font-size:0.75rem; color:var(--text-dim); line-height:1.6;">
                    Estimert total kostnad: <b style="color:var(--text)">175 000 kr</b><br>
                    Estimert besparelse: <b style="color:var(--success)">105 000 kr (-37.5%)</b><br>
                    Effekt av nattsenking: <b style="color:var(--honey)">~22 000 kr</b>
                </div>
            </div>

            <div style="margin-top:14px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:6px;">üèÜ Honey-program kostnader</div>
                <div style="background:rgba(255,255,255,0.025); border-radius:12px; padding:14px; border: 1px solid rgba(255,255,255,0.04);">
                    <div style="display:flex; justify-content:space-between; font-size:0.78rem; margin-bottom:8px;">
                        <span>Totalt utstedt Honey:</span>
                        <strong style="color:var(--honey)">440 200 üçØ</strong>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.78rem; margin-bottom:8px;">
                        <span>Innl√∏st Honey (verdi):</span>
                        <strong style="color:var(--text)">12 400 kr</strong>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:0.78rem;">
                        <span>Netto besparelse etter Honey:</span>
                        <strong style="color:var(--success)">129 980 kr</strong>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== ADMIN TAB 4 ‚Äî BOLIGOVERSIKT ========== -->
    <section id="tab-admin-beboere" class="tab-content">
        <div class="card">
            <h3>üèòÔ∏è Boligoversikt ‚Äî Per Kube</h3>
            <p class="card-sub">Aggregert energidata per kube, etasje og boligblokk ‚Äî uten sporing av enkeltpersoner</p>

            <div class="admin-kpi-grid">
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--admin-accent);">847</div>
                    <div class="admin-kpi-label">Totalt enheter</div>
                    <div class="admin-kpi-change up">4 bygg</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--success);">-34%</div>
                    <div class="admin-kpi-label">Snitt str√∏mreduksjon</div>
                    <div class="admin-kpi-change up">‚ñ≤ 6% fra jan</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--honey);">20.4¬∞</div>
                    <div class="admin-kpi-label">Snitt temperatur</div>
                    <div class="admin-kpi-change up">Innenfor m√•l</div>
                </div>
                <div class="admin-kpi">
                    <div class="admin-kpi-val" style="color:var(--purple);">89%</div>
                    <div class="admin-kpi-label">Sparemodus-bruk</div>
                    <div class="admin-kpi-change up">‚ñ≤ 12%</div>
                </div>
            </div>

            <!-- Bygg-niv√• oversikt -->
            <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-top:12px; margin-bottom:8px;">üè¢ Energistatus per Bygg</div>
            <div class="building-list">
                <div class="building-item">
                    <div class="building-icon" style="background:var(--success-dim);">üè¢</div>
                    <div class="building-body">
                        <div class="building-name">Stavanger Studentheim</div>
                        <div class="building-meta">214 kuber ¬∑ 12 etasjer ¬∑ Snitt: -38% forbruk</div>
                    </div>
                    <div class="building-status good">Effektiv</div>
                </div>
                <div class="building-item">
                    <div class="building-icon" style="background:var(--warning-dim);">üèòÔ∏è</div>
                    <div class="building-body">
                        <div class="building-name">Ullandhaug Studentby</div>
                        <div class="building-meta">386 kuber ¬∑ 8 bygg ¬∑ Snitt: -29% forbruk</div>
                    </div>
                    <div class="building-status warning">Kan forbedres</div>
                </div>
                <div class="building-item">
                    <div class="building-icon" style="background:var(--success-dim);">üè†</div>
                    <div class="building-body">
                        <div class="building-name">Bjergsted Studenthus</div>
                        <div class="building-meta">128 kuber ¬∑ 4 bygg ¬∑ Snitt: -36% forbruk</div>
                    </div>
                    <div class="building-status good">Effektiv</div>
                </div>
                <div class="building-item">
                    <div class="building-icon" style="background:var(--success-dim);">üè°</div>
                    <div class="building-body">
                        <div class="building-name">Hundv√•g Studentboliger</div>
                        <div class="building-meta">119 kuber ¬∑ 3 bygg ¬∑ Snitt: -33% forbruk</div>
                    </div>
                    <div class="building-status good">Effektiv</div>
                </div>
            </div>
            <!-- Kube-type sammenligning -->
            <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-top:16px; margin-bottom:8px;">üî≤ Snittforbruk per Kubetype</div>
            <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px;">
                <div class="admin-kpi" style="padding:14px;">
                    <div style="font-size:1.2rem; margin-bottom:4px;">üî≤</div>
                    <div style="font-weight:900; font-size:1rem; color:var(--success);">0.24 kW</div>
                    <div style="font-size:0.62rem; color:var(--text-dim); font-weight:600; margin-top:2px;">Enkeltkube (1-roms)</div>
                    <div style="font-size:0.58rem; color:var(--success); font-weight:700;">-36% vs. snitt</div>
                </div>
                <div class="admin-kpi" style="padding:14px;">
                    <div style="font-size:1.2rem; margin-bottom:4px;">üî≤üî≤</div>
                    <div style="font-weight:900; font-size:1rem; color:var(--honey);">0.41 kW</div>
                    <div style="font-size:0.62rem; color:var(--text-dim); font-weight:600; margin-top:2px;">Dobbelkube (2-roms)</div>
                    <div style="font-size:0.58rem; color:var(--honey); font-weight:700;">-31% vs. snitt</div>
                </div>
                <div class="admin-kpi" style="padding:14px;">
                    <div style="font-size:1.2rem; margin-bottom:4px;">üè†</div>
                    <div style="font-weight:900; font-size:1rem; color:var(--honey);">0.58 kW</div>
                    <div style="font-size:0.62rem; color:var(--text-dim); font-weight:600; margin-top:2px;">Familiebolig (3-roms)</div>
                    <div style="font-size:0.58rem; color:var(--honey); font-weight:700;">-28% vs. snitt</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üì¨ Kommunikasjon & Kampanjer</h3>
            <p class="card-sub">Push-varsler og energikampanjer til boliger (aldri personrettet)</p>

            <div style="background:rgba(255,255,255,0.025); border-radius:14px; padding:16px; border: 1px solid rgba(255,255,255,0.04); margin-top:8px;">
                <div style="font-weight:700; font-size:0.82rem; margin-bottom:10px;">üì¢ Siste kampanjer</div>
                <div class="auto-action-item">
                    <div class="auto-icon">üéØ</div>
                    <div class="auto-body">
                        <div class="auto-title">"Vinterchallenge ‚Äî Spar 20% i feb"</div>
                        <div class="auto-desc">Sendt 1. feb ¬∑ √Öpnet: 72% ¬∑ Deltakende kuber: 412</div>
                    </div>
                    <div class="auto-saved" style="color:var(--admin-accent); background:var(--admin-accent-dim);">Aktiv</div>
                </div>
                <div class="auto-action-item">
                    <div class="auto-icon">üåô</div>
                    <div class="auto-body">
                        <div class="auto-title">"Nattsenking = Gratis kaffe"</div>
                        <div class="auto-desc">Sendt 20. jan ¬∑ √Öpnet: 84% ¬∑ Kuber med nattmodus: 68%</div>
                    </div>
                    <div class="auto-saved" style="color:var(--success); background:var(--success-dim);">Fullf√∏rt</div>
                </div>
            </div>

            <div style="margin-top:14px;">
                <div style="font-size:0.72rem; font-weight:700; color:var(--text-dim); margin-bottom:8px;">üìä Inaktive boliger ‚Äî Trenger oppf√∏lging</div>
                <div class="engagement-row" style="border-color:rgba(255,77,77,0.15);">
                    <div class="engagement-avatar" style="background:var(--danger-dim);">‚ö†Ô∏è</div>
                    <div class="engagement-body">
                        <div class="engagement-name">22 kuber uten app-aktivitet siste 14d</div>
                        <div class="engagement-meta">Ullandhaug: 14 ¬∑ Stavanger Studentheim: 5 ¬∑ Bjergsted: 3</div>
                    </div>
                    <button class="alert-action" onclick="showToast('üìß P√•minnelse sendt til ber√∏rte boliger', 'success')">Send P√•minnelse</button>
                </div>
                <div class="engagement-row" style="border-color:rgba(255,195,0,0.15);">
                    <div class="engagement-avatar" style="background:var(--warning-dim);">üí°</div>
                    <div class="engagement-body">
                        <div class="engagement-name">38 kuber uten AI-forslag implementert</div>
                        <div class="engagement-meta">Potensielt 6 400 kr/mnd i uoppdaget besparelse</div>
                    </div>
                    <button class="alert-action" onclick="showToast('üìß Motivasjonskampanje sendt med energitips', 'success')">Start Kampanje</button>
                </div>
            </div>

            <div class="privacy-banner" style="margin-top:14px;">
                <div class="privacy-icon">üîí</div>
                <div>
                    <div class="privacy-title">Ingen sporing av enkeltpersoner</div>
                    <div class="privacy-desc">Driftsvisningen viser kun aggregert data per kube, etasje og bygg. Ingen personlig informasjon er tilgjengelig for driftspersonell.</div>
                    <div class="privacy-tags">
                        <span class="p-tag">Kubebasert</span>
                        <span class="p-tag">Aggregert</span>
                        <span class="p-tag">Anonymisert</span>
                        <span class="p-tag">GDPR</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== ADMIN TAB 5 ‚Äî VARSLER ========== -->
    <section id="tab-admin-varsler" class="tab-content">
        <div class="card full-span">
            <h3>üîî Varsler & Vedlikehold</h3>
            <p class="card-sub">Aktive driftsvarsler, avvik og vedlikeholdsanbefalinger fra BeeAI</p>

            <div class="alert-list">
                <div class="alert-item critical">
                    <div class="alert-icon">üö®</div>
                    <div class="alert-body">
                        <div class="alert-title">Varmtvannsbereder ‚Äî Ullandhaug Bygg 7</div>
                        <div class="alert-desc">Unormalt h√∏yt str√∏mforbruk (38 kWh/dag vs. snitt 22). Kan indikere kalkavleiring eller termostatfeil. Anbefaler inspeksjon.</div>
                        <div class="alert-time">Detektert: 13. feb kl. 04:23 ¬∑ Varighet: 28 timer</div>
                    </div>
                    <button class="alert-action" onclick="this.textContent='‚úì Sendt'; this.style.color='var(--success)'; showToast('üîß Arbeidsordre opprettet for vaktmester', 'success')">Opprett Ordre</button>
                </div>

                <div class="alert-item critical">
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <div class="alert-body">
                        <div class="alert-title">Ventilasjon ‚Äî Stavanger Studentheim, Blokk C</div>
                        <div class="alert-desc">Ventilasjonsaggregat kj√∏rer kontinuerlig uten CO‚ÇÇ-behov. Forbruker +23 kWh/dag ekstra. Mulig sensorfeil eller styringsfeil.</div>
                        <div class="alert-time">Detektert: 12. feb kl. 18:05 ¬∑ Varighet: 44 timer</div>
                    </div>
                    <button class="alert-action" onclick="this.textContent='‚úì Sendt'; this.style.color='var(--success)'; showToast('üîß Arbeidsordre sendt til ventilasjonstekniker', 'success')">Opprett Ordre</button>
                </div>

                <div class="alert-item warn">
                    <div class="alert-icon">üå°Ô∏è</div>
                    <div class="alert-body">
                        <div class="alert-title">Overtemperatur ‚Äî 12 enheter i Ullandhaug</div>
                        <div class="alert-desc">12 enheter har gjennomsnittstemp over 23¬∞. Beboere har overstyrt termostater. Vurder √• sende energir√•dgivning.</div>
                        <div class="alert-time">Siste 7 dager ¬∑ Samlet ekstraforbruk: ~180 kWh</div>
                    </div>
                    <button class="alert-action" onclick="this.textContent='‚úì Sendt'; this.style.color='var(--success)'; showToast('üìß Energir√•dgivning sendt til 12 beboere', 'success')">Send R√•dgivning</button>
                </div>

                <div class="alert-item maint">
                    <div class="alert-icon">üîß</div>
                    <div class="alert-body">
                        <div class="alert-title">Prediktivt vedlikehold ‚Äî Bjergsted Bygg 2</div>
                        <div class="alert-desc">BeeAI har oppdaget gradvis √∏kning i str√∏mforbruk for oppvarming (+8% over 30 dager). Kan tyde p√• d√•rlig isolasjon eller vinduslekkasje. B√∏r inspiseres f√∏r det utl√∏ser h√∏yere kostnader.</div>
                        <div class="alert-time">Trend oppdaget over 30 dager ¬∑ Estimert ekstra: 4 200 kr/mnd</div>
                    </div>
                    <button class="alert-action" onclick="this.textContent='‚úì Planlagt'; this.style.color='var(--success)'; showToast('üìÖ Inspeksjon planlagt for uke 8', 'success')">Planlegg</button>
                </div>

                <div class="alert-item info">
                    <div class="alert-icon">üíß</div>
                    <div class="alert-body">
                        <div class="alert-title">Fuktighetsvarsel ‚Äî Hundv√•g Bygg 1, 3. etg</div>
                        <div class="alert-desc">3 enheter viser gjennomsnittlig 68% luftfuktighet (grense: 60%). Risiko for mugg. Ventilasjonskapasitet b√∏r vurderes.</div>
                        <div class="alert-time">Siste 5 dager ¬∑ P√•g√•ende</div>
                    </div>
                    <button class="alert-action" onclick="this.textContent='‚úì Justert'; this.style.color='var(--success)'; showToast('üåÄ Ventilasjon √∏kt automatisk i ber√∏rte enheter', 'success')">Auto-juster</button>
                </div>

                <div class="alert-item info">
                    <div class="alert-icon">üì°</div>
                    <div class="alert-body">
                        <div class="alert-title">Sensor offline ‚Äî Ullandhaug Bygg 3, enhet 14B</div>
                        <div class="alert-desc">Temperatursensor har ikke rapportert data p√• 6 timer. Kan skyldes nettverksfeil eller batteribytte.</div>
                        <div class="alert-time">Sist sett: 14. feb kl. 06:12</div>
                    </div>
                    <button class="alert-action" onclick="this.textContent='‚úì Notert'; this.style.color='var(--success)'; showToast('üìã Lagt til vedlikeholdsk√∏', 'success')">Merk Notert</button>
                </div>
            </div>
        </div>
    </section>


</main>

<div class="toast" id="toast"></div>

<script>
    // ========== STATE ==========
    let honey = 450;
    let currentRole = 'student';
    let aiImplemented = { 1: false, 2: false, 3: false, 4: false };
    const aiRewards = { 1: 30, 2: 20, 3: 25, 4: 50 };
    const aiSavings = { 1: 23, 2: 15, 3: 31, 4: 67 };

    // ========== ROLE SWITCHING ==========
    function switchRole(role) {
        currentRole = role;
        const body = document.body;
        const studentNav = document.getElementById('nav-student');
        const adminNav = document.getElementById('nav-admin');
        const studentBtn = document.getElementById('role-student');
        const adminBtn = document.getElementById('role-admin');
        const honeyPill = document.getElementById('honey-pill-wrap');

        // Hide all tabs
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));

        if (role === 'admin') {
            body.classList.add('admin-mode');
            studentNav.style.display = 'none';
            adminNav.style.display = 'flex';
            studentBtn.className = 'role-btn';
            adminBtn.className = 'role-btn active-admin';
            honeyPill.style.display = 'none';

            // Activate first admin tab
            document.getElementById('tab-admin-dash').classList.add('active');
            adminNav.querySelectorAll('.nav-btn').forEach((b, i) => {
                b.classList.toggle('active', i === 0);
            });

            showToast('üèõÔ∏è Admin-modus ‚Äî Skipnad / Driftsvisning', '');
        } else {
            body.classList.remove('admin-mode');
            studentNav.style.display = 'flex';
            adminNav.style.display = 'none';
            studentBtn.className = 'role-btn active-student';
            adminBtn.className = 'role-btn';
            honeyPill.style.display = 'flex';

            // Activate first student tab
            document.getElementById('tab-hybel').classList.add('active');
            studentNav.querySelectorAll('.nav-btn').forEach((b, i) => {
                b.classList.toggle('active', i === 0);
            });

            showToast('üéì Student-modus ‚Äî Din personlige hybel', '');
        }
    }

    // ========== ADMIN CHARTS ==========
    function buildAdminCharts() {
        // Portfolio chart
        const portfolioEl = document.getElementById('admin-portfolio-chart');
        if (portfolioEl) {
            const data = [82, 78, 85, 76, 71, 60, 55];
            const max = Math.max(...data);
            portfolioEl.innerHTML = data.map((v, i) =>
                `<div class="admin-chart-bar" style="height:${(v / max) * 100}%; background: linear-gradient(to top, ${i === 6 ? '#06b6d4' : 'rgba(6,182,212,0.4)'}, ${i === 6 ? '#22d3ee' : 'rgba(6,182,212,0.2)'});"></div>`
            ).join('');
        }

        // Savings chart
        const savingsEl = document.getElementById('admin-savings-chart');
        if (savingsEl) {
            const data = [42000, 58000, 72000, 81000, 94000, 97680];
            const max = Math.max(...data);
            savingsEl.innerHTML = data.map((v, i) =>
                `<div class="admin-chart-bar" style="height:${(v / max) * 100}%; background: linear-gradient(to top, ${i === data.length - 1 ? '#00d166' : 'rgba(0,209,102,0.3)'}, ${i === data.length - 1 ? '#34d399' : 'rgba(0,209,102,0.15)'});"></div>`
            ).join('');
        }

        // Engagement chart (removed - no longer tracking individuals)
    }
    buildAdminCharts();

    // ========== SIMULATED LIVE COMFORT ==========
    function simulateComfort() {
        const score = document.getElementById('comfort-score');
        const headline = document.getElementById('comfort-headline');
        const desc = document.getElementById('comfort-desc');
        const arc = document.getElementById('gauge-arc');
        const tempDisp = document.getElementById('temp-display');

        const vibes = [
            { s: 86, emoji: 'üòä', h: 'Perfekt stemning!', d: 'Luften er frisk, temperaturen behagelig, og lyset er fint. BeeAI styrer alt i bakgrunnen.', t: '21.5¬∞' },
            { s: 88, emoji: 'üòÑ', h: 'Helt topp!', d: 'Alt er optimalt ‚Äî luft, lys og varme er tilpasset deg automatisk.', t: '21.3¬∞' },
            { s: 84, emoji: 'üòä', h: 'Veldig bra!', d: 'Frisk luft og god temperatur. Lyset justeres etter dagslysniv√•.', t: '21.6¬∞' },
            { s: 90, emoji: 'ü§©', h: 'Helt perfekt!', d: 'Best mulige komfort akkurat n√•. BeeAI har optimalisert alt.', t: '21.4¬∞' },
        ];

        let idx = 0;
        setInterval(() => {
            idx = Math.floor(Math.random() * vibes.length);
            const v = vibes[idx];
            if (score) score.textContent = v.s;
            if (headline) headline.textContent = v.emoji + ' ' + v.h;
            if (desc) desc.textContent = v.d;
            if (tempDisp) tempDisp.textContent = v.t;
            if (arc) {
                const offset = 314 - (314 * v.s / 100);
                arc.setAttribute('stroke-dashoffset', offset);
            }
        }, 5000);
    }
    simulateComfort();

    // ========== TOAST ==========
    function showToast(msg, type = '') {
        const t = document.getElementById('toast');
        t.className = 'toast';
        t.innerHTML = msg;
        t.style.borderColor = type === 'success' ? 'rgba(0,209,102,0.3)' :
                              type === 'error' ? 'rgba(255,77,77,0.3)' : 'rgba(255,195,0,0.3)';
        void t.offsetWidth;
        t.classList.add('show');
        setTimeout(() => t.className = 'toast', 3400);
    }

    // ========== TAB NAVIGATION ==========
    function showTab(id, btn, navType) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        const navId = navType === 'admin' ? 'nav-admin' : 'nav-student';
        document.getElementById(navId).querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('tab-' + id).classList.add('active');
        btn.classList.add('active');
    }

    // ========== MODE SWITCH ==========
    function setMode(mode, btn) {
        document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const temp = document.getElementById('temp-display');
        const score = document.getElementById('comfort-score');
        const label = document.getElementById('comfort-label');
        const headline = document.getElementById('comfort-headline');
        const desc = document.getElementById('comfort-desc');
        const arc = document.getElementById('gauge-arc');

        const modes = {
            hjemme: { t: '21.5¬∞', score: 86, label: 'KOMFORT', emoji: 'üòä', head: 'Perfekt stemning!', desc: 'Luften er frisk, temperaturen behagelig, og lyset er fint. BeeAI styrer alt i bakgrunnen.', off: '44', s: 'url(#gaugeGrad)', toast: 'üè† Normal modus aktiv' },
            bort:   { t: '17.0¬∞', score: 95, label: 'SPAREMODUS', emoji: '‚úàÔ∏è', head: 'Maks sparing!', desc: 'Hybelen er i dvalemodus ‚Äî varme, lys og ventilasjon p√• minimum. Du tjener 50 üçØ!', off: '16', s: 'var(--success)', toast: '‚úàÔ∏è Sparemodus ‚Äî du tjener Honey mens du er borte!', honey: 50 },
            natt:   { t: '19.0¬∞', score: 90, label: 'NATTMODUS', emoji: 'üåô', head: 'God natt!', desc: 'Lys av, stille ventilasjon, og senket temperatur for bedre s√∏vn.', off: '31', s: 'var(--accent)', toast: 'üåô Nattmodus ‚Äî optimalisert for s√∏vnkvalitet', honey: 15 },
            lese:   { t: '20.5¬∞', score: 88, label: 'LESEMODUS', emoji: 'üìñ', head: 'Fokus-modus!', desc: 'Optimal belysning for lesing, stille ventilasjon og behagelig temperatur.', off: '38', s: 'var(--purple)', toast: 'üìñ Lesemodus ‚Äî perfekt for studier' },
        };

        const m = modes[mode];
        if (temp) temp.innerText = m.t;
        if (score) score.innerText = m.score;
        if (label) label.innerText = m.label;
        if (headline) headline.innerText = m.emoji + ' ' + m.head;
        if (desc) desc.innerText = m.desc;
        if (arc) {
            arc.setAttribute('stroke-dashoffset', m.off);
            arc.style.stroke = m.s;
        }
        showToast(m.toast, m.honey ? 'success' : '');
        if (m.honey) addHoney(m.honey, event);
    }

    // ========== FIX BUILDING ==========
    function fixAud(e) {
        const aud = document.getElementById('aud-b');
        if (aud.classList.contains('good')) return;
        aud.classList.remove('bad');
        aud.classList.add('good');
        aud.innerHTML = "Auditorium B<br><small>Optimalisert ‚úÖ</small><span class='room-temp'>19.5¬∞</span><span class='room-pwr'>0.3 kW</span>";
        document.getElementById('alert-box').style.display = 'none';
        document.getElementById('fix-msg').style.display = 'block';
        const lw = document.getElementById('light-waste'); if(lw) lw.style.display = 'none';
        const vw = document.getElementById('vent-waste'); if(vw) vw.style.display = 'none';
        showToast('‚ö° Aud. B optimalisert ‚Äî sparer 14.50 kr/t!', 'success');
    }

    // ========== AI IMPLEMENTATION ==========
    function implementAI(id, card, e) {
        if (aiImplemented[id]) return;
        aiImplemented[id] = true;
        card.classList.add('implemented');
        const btn = document.getElementById('ai-btn-' + id);
        btn.textContent = '‚úì Implementert';
        btn.classList.add('done');
        addHoney(aiRewards[id], e);

        let totalSaved = 0;
        for (let k in aiImplemented) {
            if (aiImplemented[k]) totalSaved += aiSavings[k];
        }
        const remaining = 136 - totalSaved;
        document.getElementById('total-save').textContent = remaining > 0 ?
            remaining + ' kr/mnd gjenst√•r' : '‚úÖ Alle tiltak implementert!';
        if (remaining <= 0) {
            document.getElementById('total-save').style.color = 'var(--success)';
        }

        showToast(`ü§ñ Tiltak implementert ‚Äî +${aiRewards[id]} üçØ`, 'success');
    }

    // ========== BUY ITEM ==========
    function buy(price, btnEl) {
        if (honey >= price) {
            honey -= price;
            updateHoneyDisplay();
            btnEl.textContent = '‚úì Kj√∏pt';
            btnEl.classList.add('sold');
            showToast('üéâ Kj√∏p gjennomf√∏rt! Sjekk e-posten din.', 'success');
        } else {
            showToast('üçØ Trenger mer Honey! Spar str√∏m for √• tjene.', 'error');
        }
    }

    // ========== HONEY SYSTEM ==========
    function updateHoneyDisplay() {
        const el = document.getElementById('honey-val');
        const target = honey;
        const start = parseInt(el.textContent) || 0;
        const diff = target - start;
        let step = 0;
        const steps = 18;
        const interval = setInterval(() => {
            step++;
            el.textContent = Math.round(start + (diff * step / steps));
            if (step >= steps) { el.textContent = target; clearInterval(interval); }
        }, 18);
        const lbPts = document.getElementById('lb-your-pts');
        if (lbPts) lbPts.textContent = honey + ' üçØ';
    }

    function addHoney(amount, e) {
        honey += amount;
        updateHoneyDisplay();
        if (e && e.pageX) {
            const float = document.createElement('div');
            float.className = 'floating-h no-transition';
            float.innerText = `+${amount} üçØ`;
            float.style.left = e.pageX + 'px';
            float.style.top = e.pageY + 'px';
            document.body.appendChild(float);
            setTimeout(() => float.remove(), 1200);
        }
        if (honey >= 1000) {
            document.querySelectorAll('.badge.locked').forEach(b => {
                if (b.textContent.includes('üíé')) {
                    b.classList.remove('locked'); b.classList.add('earned');
                    showToast('üèÖ Ny badge: Diamond Saver!', 'success');
                }
            });
        }
    }

    // ========== POLICY TOGGLE ==========
    function togglePolicy(btn) {
        btn.classList.toggle('on');
        const isOn = btn.classList.contains('on');
        const name = btn.parentElement.querySelector('.policy-name').textContent;
        showToast(`${isOn ? '‚úÖ' : '‚ùå'} ${name.substring(2)} ‚Äî ${isOn ? 'Aktivert' : 'Deaktivert'}`, isOn ? 'success' : '');
    }

    // ========== REGISTER SERVICE WORKER ==========
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw.js')
            .then(r => console.log('SW registered:', r.scope))
            .catch(e => console.log('SW failed:', e));
    }
</script>
</body>
</html>
